<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
    <title>영어 학습 서바이벌 게임</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, #0c0c0c, #1a1a2e, #16213e);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            font-family: 'Courier New', monospace;
        }
        #gameContainer {
            border: 3px solid #4a90e2;
            border-radius: 10px;
            position: relative;
            box-shadow: 0 0 30px rgba(74, 144, 226, 0.5);
        }
        #gameCanvas {
            width: 100vw;
            height: 100vh;
            display: block;
            border-radius: 7px;
            background: #1a1a2e;
        }
        #wordDisplay {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0,0,0,0.8);
            padding: 15px 25px;
            border-radius: 10px;
            border: 2px solid #ffd700;
            color: white;
            font-size: 32px;
            font-weight: bold;
            z-index: 15;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
            letter-spacing: 3px;
        }
        .missing-letter {
            color: #ff4444;
            background: rgba(255, 68, 68, 0.2);
            padding: 2px 8px;
            border-radius: 5px;
            border: 2px dashed #ff4444;
        }
        #ui {
            position: absolute;
            top: 10px;
            left: 10px;
            color: #ffffff;
            font-size: 14px;
            z-index: 10;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
            font-weight: bold;
        }
        .ui-item {
            margin-bottom: 5px;
            background: rgba(0,0,0,0.7);
            padding: 3px 8px;
            border-radius: 4px;
            border-left: 2px solid #4a90e2;
            font-size: 12px;
        }
        #wordResult {
            position: fixed !important;
            left: 50% !important;
            top: 50% !important;
            transform: translate(-50%, -50%) !important;
            background: linear-gradient(145deg, #2a2a3e, #1a1a2e);
            border: 3px solid #44ff44;
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            color: white;
            z-index: 25;
            display: none;
            box-shadow: 0 0 40px rgba(68, 255, 68, 0.6);
            max-width: 400px;
            line-height: 1.6;
        }
        .word-complete {
            font-size: 28px;
            color: #44ff44;
            margin-bottom: 15px;
        }
        .word-meaning {
            font-size: 20px;
            color: #ffffff;
            margin-bottom: 10px;
        }
        .word-pronunciation {
            font-size: 16px;
            color: #aaaaaa;
            font-style: italic;
        }
        #levelUpModal {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(145deg, #2a2a3e, #1a1a2e);
            border: 3px solid #ffd700;
            padding: 25px;
            border-radius: 15px;
            text-align: center;
            color: white;
            z-index: 20;
            display: none;
            box-shadow: 0 0 40px rgba(255, 215, 0, 0.6);
        }
        .upgrade-btn {
            display: block;
            width: 320px;
            margin: 12px auto;
            padding: 12px;
            background: linear-gradient(145deg, #4a4a6a, #3a3a5a);
            border: 2px solid #666;
            color: white;
            cursor: pointer;
            border-radius: 8px;
            font-size: 16px;
            font-weight: bold;
            transition: all 0.3s ease;
        }
        .upgrade-btn:hover {
            background: linear-gradient(145deg, #5a5a7a, #4a4a6a);
            border-color: #ffd700;
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(255, 215, 0, 0.3);
        }
        #gameOver {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: linear-gradient(145deg, #3a1a1a, #2a1a1a);
            border: 3px solid #ff4444;
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            color: white;
            z-index: 20;
            display: none;
            box-shadow: 0 0 40px rgba(255, 68, 68, 0.6);
        }
        #restartBtn {
            padding: 12px 24px;
            background: linear-gradient(145deg, #ff4444, #cc3333);
            border: none;
            color: white;
            cursor: pointer;
            border-radius: 8px;
            font-size: 16px;
            margin-top: 20px;
            font-weight: bold;
            transition: all 0.3s ease;
        }
        #restartBtn:hover {
            background: linear-gradient(145deg, #ff6666, #ff4444);
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(255, 68, 68, 0.4);
        }
        h2 {
            margin-top: 0;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.8);
        }
        #feedback {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 48px;
            font-weight: bold;
            z-index: 25;
            pointer-events: none;
            text-shadow: 3px 3px 6px rgba(0,0,0,0.8);
        }
        .correct {
            color: #44ff44;
            animation: correctPulse 1s ease-out;
        }
        .incorrect {
            color: #ff4444;
            animation: incorrectShake 0.5s ease-out;
        }
        @keyframes correctPulse {
            0% { transform: translate(-50%, -50%) scale(0.5); opacity: 0; }
            50% { transform: translate(-50%, -50%) scale(1.2); opacity: 1; }
            100% { transform: translate(-50%, -50%) scale(1); opacity: 0; }
        }
        @keyframes incorrectShake {
            0%, 100% { transform: translate(-50%, -50%); }
            25% { transform: translate(-45%, -50%); }
            75% { transform: translate(-55%, -50%); }
        }
        .correct-answer {
            color: #44ff44;
            font-size: 36px;
            font-weight: bold;
            letter-spacing: 2px;
            text-shadow: 2px 2px 8px #222, 0 0 16px #44ff44;
        }
        .word-meaning {
            color: #ffd700;
            font-size: 18px;
            margin-top: 6px;
            font-weight: normal;
            text-shadow: 1px 1px 4px #222;
        }
        .word-box {
            background: rgba(20, 20, 40, 0.85);
            border: 2.5px solid #ffd700;
            border-radius: 14px;
            box-shadow: 0 4px 24px 0 rgba(0,0,0,0.35);
            padding: 18px 32px 12px 32px;
            display: inline-block;
            min-width: 180px;
            text-align: center;
            margin-top: 8px;
            margin-bottom: 8px;
            position: relative;
        }
        .word-en {
            font-family: 'Fira Mono', 'Consolas', 'monospace';
            font-size: 36px;
            color: #fff;
            letter-spacing: 4px;
            text-shadow: 0 2px 8px #222, 0 0 8px #ffd70044;
            font-weight: bold;
        }
        .missing-letter {
            color: #ff4444;
            border: none;
            border-bottom: 2.5px solid #ff4444; /* 점선X, 실선 언더라인만 */
            background: transparent;
            margin: 0 2px;
            font-size: 36px;
            display: inline-block;
            vertical-align: baseline;
            line-height: 1;
            padding: 0 8px 2px 8px;
            border-radius: 0;
            min-width: 24px;
        }
        .word-ko {
            color: #ffe066;
            font-size: 18px;
            font-weight: 400;
            letter-spacing: 1px;
            margin-left: 18px;
            vertical-align: middle;
            text-align: left;
            border: none;
            text-shadow: none;
            display: inline-block;
        }
        #menuScreen {
            position: fixed; left: 0; top: 0; width: 100vw; height: 100vh;
            background: linear-gradient(135deg, #23243a 0%, #1a1a2e 100%);
            backdrop-filter: blur(4px);
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            z-index: 1000;
            box-shadow: 0 0 80px 0 #000a;
            animation: menuFadeIn 1s;
        }
        @keyframes menuFadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        #menuScreen h1 {
            font-size: 3.2rem;
            color: #ffd700;
            margin-bottom: 1.2rem;
            letter-spacing: 2px;
            text-shadow: 0 0 18px #ffd70088, 0 2px 12px #222;
            font-family: 'Segoe UI', 'Arial Black', sans-serif;
        }
        .author {
            color: #b0b0ff;
            margin-bottom: 2.2rem;
            font-size: 1.2rem;
            letter-spacing: 1px;
            text-shadow: 0 1px 8px #222;
        }
        .menu-row {
            display: flex; gap: 2rem; margin-bottom: 2.5rem;
            align-items: center;
        }
        #startBtn {
            font-size: 1.5rem;
            padding: 0.8em 2.5em;
            border-radius: 12px;
            border: none;
            background: linear-gradient(90deg, #ffd700 0%, #ffb300 100%);
            color: #23243a;
            font-weight: bold;
            box-shadow: 0 4px 18px #ffd70033;
            cursor: pointer;
            transition: background 0.2s, transform 0.2s;
        }
        #startBtn:hover {
            background: linear-gradient(90deg, #ffe066 0%, #ffd700 100%);
            transform: translateY(-2px) scale(1.04);
        }
        #wordSelect {
            font-size: 1.2rem;
            border-radius: 8px;
            border: 1.5px solid #ffd700;
            padding: 0.5em 1.2em;
            background: #23243a;
            color: #ffd700;
            box-shadow: 0 2px 8px #ffd70022;
            outline: none;
            transition: border 0.2s;
        }
        #wordSelect:focus {
            border: 2px solid #ffe066;
        }
        .highscore {
            color: #ffe066;
            font-size: 1.25rem;
            background: rgba(40,40,60,0.7);
            border-radius: 10px;
            padding: 0.7em 2em;
            box-shadow: 0 2px 12px #ffd70022;
            margin-top: 1.2rem;
            display: flex; align-items: center; gap: 0.7em;
        }
        .highscore:before {
            content: '🏆';
            font-size: 1.3em;
        }
    </style>
</head>
<body>
    <div id="gameContainer">
        <canvas id="gameCanvas" width="800" height="600"></canvas>
        
        <div id="wordDisplay">
            <span id="currentWord">appl_</span>
        </div>
        
        <div id="ui">
            <div class="ui-item">❤️ HP: <span id="health">100</span></div>
            <div class="ui-item">⭐ Lv: <span id="level">1</span></div>
            <div class="ui-item">✨ XP: <span id="exp">0</span>/<span id="expMax">10</span></div>
            <div class="ui-item">💀 처치: <span id="kills">0</span></div>
            <div class="ui-item">📝 단어: <span id="completedWords">0</span></div>
            <div class="ui-item">⏱️ 시간: <span id="time">0</span>초</div>
        </div>
        
        <div id="feedback"></div>
        
        <div id="wordResult">
            <div class="word-complete" id="wordCompleteText">Loading...</div>
            <div class="word-meaning" id="wordMeaningText">Loading...</div>
            <div class="word-pronunciation" id="wordPronunciationText">Loading...</div>
        </div>
        
        <div id="levelUpModal">
            <h2>🎉 레벨업! 🎉</h2>
            <p>업그레이드를 선택하세요:</p>
            <button class="upgrade-btn" onclick="selectUpgrade('attackSpeed')">⚡ 공격 속도 증가 (+20%)</button>
            <button class="upgrade-btn" onclick="selectUpgrade('moveSpeed')">🏃 이동 속도 증가 (+15%)</button>
            <button class="upgrade-btn" onclick="selectUpgrade('projectileSize')">💥 투사체 크기 증가 (+25%)</button>
            <button class="upgrade-btn" onclick="selectUpgrade('health')">❤️ 체력 회복 (+30)</button>
        </div>
        
        <div id="gameOver">
            <h2>💀 게임 오버! 💀</h2>
            <p>생존 시간: <span id="finalTime">0</span>초</p>
            <p>처치한 몬스터: <span id="finalKills">0</span>마리</p>
            <p>완성한 단어: <span id="finalWords">0</span>개</p>
            <p>달성 레벨: <span id="finalLevel">1</span></p>
            <button id="restartBtn" onclick="restartGame()">🔄 다시 시작</button>
        </div>
    </div>

    <div id="menuScreen">
        <h1>VamsurEnglish</h1>
        <div class="author">제작자: Stevecoding</div>
        <div class="menu-row">
            <button id="startBtn">시작</button>
            <select id="wordSelect"></select>
        </div>
        <div class="highscore">최고 점수: <span id="highScoreValue">0</span></div>
    </div>

    <script>
        // 터치/마우스 이동 목표 좌표 전역 변수 선언 (가장 상단)
        let targetX = null;
        let targetY = null;

        // 마우스/터치 누르고 있는 동안 이동하는 시스템 변수 선언
        let isPointerDown = false;
        let pointerX = null, pointerY = null;

        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');

        // 영어 단어 데이터베이스(단계별, english_words_complete.json에서 자동 생성)
        const wordSets = {
            '1단계': [
                { word: "a", display: "_", missing: "a", meaning: "하나의" },
                { word: "I", display: "_", missing: "I", meaning: "나" },
                { word: "go", display: "_o", missing: "g", meaning: "가다" },
                { word: "no", display: "n_", missing: "o", meaning: "아니다" },
                { word: "yes", display: "_es", missing: "y", meaning: "네" },
                { word: "hi", display: "_i", missing: "h", meaning: "안녕" },
                { word: "bye", display: "by_", missing: "e", meaning: "안녕" },
                { word: "one", display: "o_e", missing: "n", meaning: "하나" },
                { word: "two", display: "_wo", missing: "t", meaning: "숫자 2" },
                { word: "big", display: "_ig", missing: "b", meaning: "큰" },
                { word: "cat", display: "_at", missing: "c", meaning: "고양이" },
                { word: "dog", display: "do_", missing: "g", meaning: "개" },
                { word: "boy", display: "b_y", missing: "o", meaning: "소년" },
                { word: "girl", display: "g_rl", missing: "i", meaning: "소녀" },
                { word: "man", display: "_an", missing: "m", meaning: "사람, 남자" },
                { word: "day", display: "_ay", missing: "d", meaning: "낮, 하루" },
                { word: "sun", display: "su_", missing: "n", meaning: "태양" },
                { word: "eye", display: "_ye", missing: "e", meaning: "눈" },
                { word: "ear", display: "ea_", missing: "r", meaning: "귀" },
                { word: "red", display: "r_d", missing: "e", meaning: "빨간색" },
                { word: "blue", display: "_lue", missing: "b", meaning: "푸른" },
                { word: "book", display: "boo_", missing: "k", meaning: "책" },
                { word: "eat", display: "e_t", missing: "a", meaning: "먹다" },
                { word: "see", display: "_ee", missing: "s", meaning: "보다" },
                { word: "sit", display: "si_", missing: "t", meaning: "앉다" },
                { word: "run", display: "_un", missing: "r", meaning: "달리다" },
                { word: "good", display: "go_d", missing: "o", meaning: "좋은" },
                { word: "bad", display: "ba_", missing: "d", meaning: "나쁜" },
                { word: "hot", display: "_ot", missing: "h", meaning: "뜨거운" },
                { word: "cold", display: "c_ld", missing: "o", meaning: "추운" },
                { word: "up", display: "u_", missing: "p", meaning: "위에" },
                { word: "mom", display: "_om", missing: "m", meaning: "어머니" },
                { word: "dad", display: "d_d", missing: "a", meaning: "아버지" },
                { word: "baby", display: "bab_", missing: "y", meaning: "아기" },
                { word: "ball", display: "ba_l", missing: "l", meaning: "공" },
                { word: "car", display: "_ar", missing: "c", meaning: "자동차" },
                { word: "come", display: "com_", missing: "e", meaning: "오다" },
                { word: "here", display: "_ere", missing: "h", meaning: "여기에" },
                { word: "look", display: "loo_", missing: "k", meaning: "바라보다" },
                { word: "water", display: "wa_er", missing: "t", meaning: "물" }
            ],
            '2단계': [
                { word: "three", display: "_hree", missing: "t", meaning: "숫자 3" },
                { word: "four", display: "fo_r", missing: "u", meaning: "숫자 4" },
                { word: "five", display: "f_ve", missing: "i", meaning: "숫자 5" },
                { word: "six", display: "si_", missing: "x", meaning: "숫자 6" },
                { word: "seven", display: "se_en", missing: "v", meaning: "숫자 7" },
                { word: "eight", display: "eigh_", missing: "t", meaning: "숫자 8" },
                { word: "nine", display: "_ine", missing: "n", meaning: "숫자 9" },
                { word: "ten", display: "_en", missing: "t", meaning: "숫자 10" },
                { word: "hand", display: "h_nd", missing: "a", meaning: "손" },
                { word: "foot", display: "_oot", missing: "f", meaning: "발" },
                { word: "head", display: "hea_", missing: "d", meaning: "머리" },
                { word: "face", display: "_ace", missing: "f", meaning: "얼굴" },
                { word: "arm", display: "a_m", missing: "r", meaning: "팔" },
                { word: "leg", display: "_eg", missing: "l", meaning: "다리" },
                { word: "nose", display: "no_e", missing: "s", meaning: "코" },
                { word: "hair", display: "_air", missing: "h", meaning: "머리카락" },
                { word: "mouth", display: "mou_h", missing: "t", meaning: "입" },
                { word: "green", display: "gre_n", missing: "e", meaning: "녹색" },
                { word: "yellow", display: "yell_w", missing: "o", meaning: "노란색" },
                { word: "black", display: "_lack", missing: "b", meaning: "검은, 검은색" },
                { word: "white", display: "wh_te", missing: "i", meaning: "하얀색" },
                { word: "house", display: "ho_se", missing: "u", meaning: "집" },
                { word: "home", display: "_ome", missing: "h", meaning: "집" },
                { word: "door", display: "d_or", missing: "o", meaning: "문" },
                { word: "room", display: "roo_", missing: "m", meaning: "방" },
                { word: "bed", display: "_ed", missing: "b", meaning: "침대" },
                { word: "table", display: "ta_le", missing: "b", meaning: "식탁, 탁자" },
                { word: "chair", display: "cha_r", missing: "i", meaning: "의자" },
                { word: "food", display: "_ood", missing: "f", meaning: "음식" },
                { word: "milk", display: "mi_k", missing: "l", meaning: "우유" },
                { word: "bread", display: "bre_d", missing: "a", meaning: "빵" },
                { word: "apple", display: "_pple", missing: "a", meaning: "사과" },
                { word: "cake", display: "ca_e", missing: "k", meaning: "케이크" },
                { word: "egg", display: "e_g", missing: "g", meaning: "알, 달걀" },
                { word: "fish", display: "_ish", missing: "f", meaning: "고기, 낚시하다" },
                { word: "cup", display: "cu_", missing: "p", meaning: "컵" },
                { word: "hat", display: "_at", missing: "h", meaning: "모자" },
                { word: "shoe", display: "sh_e", missing: "o", meaning: "구두" },
                { word: "play", display: "p_ay", missing: "l", meaning: "놀다" },
                { word: "happy", display: "ha_py", missing: "p", meaning: "행복한" }
            ],
            '3단계': [
                { word: "mother", display: "mo_her", missing: "t", meaning: "어머니" },
                { word: "father", display: "_ather", missing: "f", meaning: "아버지" },
                { word: "sister", display: "sist_r", missing: "e", meaning: "자매" },
                { word: "brother", display: "br_ther", missing: "o", meaning: "형제" },
                { word: "family", display: "fami_y", missing: "l", meaning: "가족" },
                { word: "friend", display: "_riend", missing: "f", meaning: "친구" },
                { word: "school", display: "sc_ool", missing: "h", meaning: "학교" },
                { word: "teacher", display: "teach_r", missing: "e", meaning: "가르치다" },
                { word: "student", display: "stude_t", missing: "n", meaning: "공부하다" },
                { word: "class", display: "_lass", missing: "c", meaning: "학급" },
                { word: "morning", display: "morn_ng", missing: "i", meaning: "아침" },
                { word: "afternoon", display: "aftern_on", missing: "o", meaning: "오후" },
                { word: "evening", display: "_vening", missing: "e", meaning: "저녁" },
                { word: "night", display: "nig_t", missing: "h", meaning: "밤" },
                { word: "today", display: "to_ay", missing: "d", meaning: "오늘, 현재" },
                { word: "tomorrow", display: "tom_rrow", missing: "o", meaning: "내일" },
                { word: "yesterday", display: "yest_rday", missing: "e", meaning: "어제" },
                { word: "week", display: "_eek", missing: "w", meaning: "한 주" },
                { word: "time", display: "ti_e", missing: "m", meaning: "시간" },
                { word: "clock", display: "clo_k", missing: "c", meaning: "시계" },
                { word: "money", display: "_oney", missing: "m", meaning: "돈" },
                { word: "work", display: "wor_", missing: "k", meaning: "일부, 부분" },
                { word: "name", display: "n_me", missing: "a", meaning: "이름" },
                { word: "age", display: "a_e", missing: "g", meaning: "나이" },
                { word: "old", display: "_ld", missing: "o", meaning: "늙은" },
                { word: "young", display: "you_g", missing: "n", meaning: "젊은" },
                { word: "new", display: "_ew", missing: "n", meaning: "새로운" },
                { word: "small", display: "sm_ll", missing: "a", meaning: "작은" },
                { word: "long", display: "l_ng", missing: "o", meaning: "긴" },
                { word: "short", display: "sh_rt", missing: "o", meaning: "짧은" },
                { word: "tall", display: "_all", missing: "t", meaning: "키가 큰" },
                { word: "open", display: "op_n", missing: "e", meaning: "열다" },
                { word: "close", display: "_lose", missing: "c", meaning: "닫다" },
                { word: "give", display: "gi_e", missing: "v", meaning: "주다" },
                { word: "take", display: "ta_e", missing: "k", meaning: "가져가다, 잡다" },
                { word: "put", display: "_ut", missing: "p", meaning: "놓다" },
                { word: "get", display: "g_t", missing: "e", meaning: "얻다" },
                { word: "make", display: "ma_e", missing: "k", meaning: "만들다" },
                { word: "help", display: "hel_", missing: "p", meaning: "돕다" },
                { word: "like", display: "_ike", missing: "l", meaning: "좋아하다" }
            ],
            '4단계': [
                { word: "eleven", display: "ele_en", missing: "v", meaning: "숫자 11" },
                { word: "twelve", display: "_welve", missing: "t", meaning: "숫자 12" },
                { word: "thirteen", display: "thirt_en", missing: "e", meaning: "숫자 13" },
                { word: "twenty", display: "twe_ty", missing: "n", meaning: "숫자 20" },
                { word: "thirty", display: "_hirty", missing: "t", meaning: "숫자 30" },
                { word: "hundred", display: "hund_ed", missing: "r", meaning: "숫자 100" },
                { word: "the", display: "_he", missing: "t", meaning: "그" },
                { word: "and", display: "a_d", missing: "n", meaning: "그리고" },
                { word: "but", display: "_ut", missing: "b", meaning: "그러나" },
                { word: "for", display: "fo_", missing: "r", meaning: "~을 위하여, ~동안" },
                { word: "with", display: "w_th", missing: "i", meaning: "~와 함께" },
                { word: "have", display: "_ave", missing: "h", meaning: "가지다" },
                { word: "do", display: "d_", missing: "o", meaning: "하다" },
                { word: "say", display: "_ay", missing: "s", meaning: "말하다" },
                { word: "can", display: "ca_", missing: "n", meaning: "할 수 있다" },
                { word: "will", display: "_ill", missing: "w", meaning: "~할 것이다" },
                { word: "may", display: "ma_", missing: "y", meaning: "~해도 좋다, 계절 5월" },
                { word: "would", display: "woul_", missing: "d", meaning: "will의 과거형" },
                { word: "could", display: "_ould", missing: "c", meaning: "can의 과거형" },
                { word: "should", display: "sho_ld", missing: "u", meaning: "~해야 한다" },
                { word: "must", display: "m_st", missing: "u", meaning: "~해야 한다" },
                { word: "walk", display: "wal_", missing: "k", meaning: "걷다" },
                { word: "talk", display: "_alk", missing: "t", meaning: "말하다" },
                { word: "read", display: "re_d", missing: "a", meaning: "읽다" },
                { word: "write", display: "wri_e", missing: "t", meaning: "쓰다" },
                { word: "listen", display: "lis_en", missing: "t", meaning: "듣다" },
                { word: "watch", display: "_atch", missing: "w", meaning: "보다" },
                { word: "sleep", display: "sle_p", missing: "e", meaning: "잠자다" },
                { word: "wake", display: "wa_e", missing: "k", meaning: "잠이 깨다" },
                { word: "stand", display: "_tand", missing: "s", meaning: "서다" },
                { word: "love", display: "lo_e", missing: "v", meaning: "사랑" },
                { word: "know", display: "kn_w", missing: "o", meaning: "알다" },
                { word: "think", display: "_hink", missing: "t", meaning: "생각하다" },
                { word: "feel", display: "fe_l", missing: "e", meaning: "느끼다" },
                { word: "want", display: "wan_", missing: "t", meaning: "원하다" },
                { word: "need", display: "_eed", missing: "n", meaning: "필요하다" },
                { word: "nice", display: "ni_e", missing: "c", meaning: "좋은" },
                { word: "fine", display: "_ine", missing: "f", meaning: "좋은, 맑은" },
                { word: "great", display: "gre_t", missing: "a", meaning: "큰" },
                { word: "beautiful", display: "beauti_ul", missing: "f", meaning: "아름다움" }
            ],
            '5단계': [
                { word: "orange", display: "_range", missing: "o", meaning: "오렌지" },
                { word: "brown", display: "br_wn", missing: "o", meaning: "갈색" },
                { word: "pink", display: "p_nk", missing: "i", meaning: "분홍색" },
                { word: "gray", display: "gra_", missing: "y", meaning: "회색" },
                { word: "purple", display: "pur_le", missing: "p", meaning: "보라색" },
                { word: "horse", display: "hor_e", missing: "s", meaning: "말" },
                { word: "cow", display: "_ow", missing: "c", meaning: "암소" },
                { word: "pig", display: "pi_", missing: "g", meaning: "돼지" },
                { word: "duck", display: "d_ck", missing: "u", meaning: "오리" },
                { word: "bird", display: "_ird", missing: "b", meaning: "새" },
                { word: "bear", display: "bea_", missing: "r", meaning: "곰" },
                { word: "lion", display: "li_n", missing: "o", meaning: "사자" },
                { word: "tiger", display: "_iger", missing: "t", meaning: "호랑이" },
                { word: "elephant", display: "elepha_t", missing: "n", meaning: "코끼리" },
                { word: "monkey", display: "mon_ey", missing: "k", meaning: "원숭이" },
                { word: "rabbit", display: "rab_it", missing: "b", meaning: "토끼" },
                { word: "mouse", display: "_ouse", missing: "m", meaning: "쥐, 마우스" },
                { word: "bee", display: "b_e", missing: "e", meaning: "벌" },
                { word: "fox", display: "fo_", missing: "x", meaning: "여우" },
                { word: "chicken", display: "ch_cken", missing: "i", meaning: "치킨, 닭" },
                { word: "cheese", display: "_heese", missing: "c", meaning: "치즈" },
                { word: "butter", display: "but_er", missing: "t", meaning: "버터" },
                { word: "meat", display: "m_at", missing: "e", meaning: "고기, 낚시하다" },
                { word: "beef", display: "bee_", missing: "f", meaning: "소고기" },
                { word: "soup", display: "_oup", missing: "s", meaning: "스프" },
                { word: "rice", display: "ri_e", missing: "c", meaning: "쌀, 밥" },
                { word: "banana", display: "ban_na", missing: "a", meaning: "바나나" },
                { word: "grape", display: "gra_e", missing: "p", meaning: "포도" },
                { word: "juice", display: "_uice", missing: "j", meaning: "주스" },
                { word: "coffee", display: "cof_ee", missing: "f", meaning: "커피" },
                { word: "tea", display: "t_a", missing: "e", meaning: "차" },
                { word: "sugar", display: "sug_r", missing: "a", meaning: "설탕" },
                { word: "salt", display: "_alt", missing: "s", meaning: "소금" },
                { word: "sandwich", display: "sandwic_", missing: "h", meaning: "샌드위치" },
                { word: "pizza", display: "piz_a", missing: "z", meaning: "피자" },
                { word: "cookie", display: "_ookie", missing: "c", meaning: "쿠키" },
                { word: "candy", display: "can_y", missing: "d", meaning: "사탕" },
                { word: "ice", display: "i_e", missing: "c", meaning: "얼음" },
                { word: "cream", display: "_ream", missing: "c", meaning: "크림" }
            ],
            '6단계': [
                { word: "finger", display: "fing_r", missing: "e", meaning: "손가락" },
                { word: "tooth", display: "_ooth", missing: "t", meaning: "이, 치아" },
                { word: "neck", display: "ne_k", missing: "c", meaning: "목" },
                { word: "back", display: "bac_", missing: "k", meaning: "뒤에" },
                { word: "skin", display: "_kin", missing: "s", meaning: "피부" },
                { word: "blood", display: "blo_d", missing: "o", meaning: "피" },
                { word: "bone", display: "b_ne", missing: "o", meaning: "뼈" },
                { word: "heart", display: "hear_", missing: "t", meaning: "마음" },
                { word: "shirt", display: "sh_rt", missing: "i", meaning: "셔츠" },
                { word: "pants", display: "_ants", missing: "p", meaning: "바지" },
                { word: "dress", display: "dres_", missing: "s", meaning: "드레스, 옷을 입다" },
                { word: "skirt", display: "sk_rt", missing: "i", meaning: "치마" },
                { word: "coat", display: "_oat", missing: "c", meaning: "외투" },
                { word: "jacket", display: "jack_t", missing: "e", meaning: "재킷" },
                { word: "sock", display: "so_k", missing: "c", meaning: "양말" },
                { word: "belt", display: "b_lt", missing: "e", meaning: "벨트, 허리띠" },
                { word: "cap", display: "ca_", missing: "p", meaning: "모자" },
                { word: "clothes", display: "_lothes", missing: "c", meaning: "옷" },
                { word: "wear", display: "we_r", missing: "a", meaning: "옷을 입다" },
                { word: "kitchen", display: "kitc_en", missing: "h", meaning: "부엌" },
                { word: "bathroom", display: "bathroo_", missing: "m", meaning: "목욕" },
                { word: "bedroom", display: "_edroom", missing: "b", meaning: "침실" },
                { word: "window", display: "wind_w", missing: "o", meaning: "창문" },
                { word: "wall", display: "wa_l", missing: "l", meaning: "벽" },
                { word: "floor", display: "_loor", missing: "f", meaning: "마루" },
                { word: "roof", display: "roo_", missing: "f", meaning: "지붕" },
                { word: "garden", display: "gard_n", missing: "e", meaning: "정원" },
                { word: "yard", display: "_ard", missing: "y", meaning: "마당" },
                { word: "box", display: "bo_", missing: "x", meaning: "상자" },
                { word: "bag", display: "b_g", missing: "a", meaning: "가방" },
                { word: "bottle", display: "bot_le", missing: "t", meaning: "병" },
                { word: "glass", display: "_lass", missing: "g", meaning: "유리, 잔" },
                { word: "plate", display: "pla_e", missing: "t", meaning: "접시" },
                { word: "bowl", display: "b_wl", missing: "o", meaning: "그릇" },
                { word: "spoon", display: "_poon", missing: "s", meaning: "숟가락" },
                { word: "fork", display: "for_", missing: "k", meaning: "포크" },
                { word: "knife", display: "kni_e", missing: "f", meaning: "칼" },
                { word: "key", display: "k_y", missing: "e", meaning: "열쇠" },
                { word: "pen", display: "_en", missing: "p", meaning: "펜" }
            ],
            '7단계': [
                { word: "pencil", display: "penc_l", missing: "i", meaning: "연필" },
                { word: "paper", display: "_aper", missing: "p", meaning: "종이" },
                { word: "desk", display: "des_", missing: "k", meaning: "책상" },
                { word: "office", display: "of_ice", missing: "f", meaning: "사무실" },
                { word: "library", display: "libr_ry", missing: "a", meaning: "도서관" },
                { word: "hospital", display: "_ospital", missing: "h", meaning: "병원" },
                { word: "bank", display: "ban_", missing: "k", meaning: "은행" },
                { word: "store", display: "st_re", missing: "o", meaning: "가게" },
                { word: "market", display: "_arket", missing: "m", meaning: "상점, 가게" },
                { word: "restaurant", display: "restauran_", missing: "t", meaning: "레스토랑, 식당" },
                { word: "hotel", display: "ho_el", missing: "t", meaning: "호텔" },
                { word: "park", display: "par_", missing: "k", meaning: "공원" },
                { word: "street", display: "_treet", missing: "s", meaning: "거리" },
                { word: "road", display: "roa_", missing: "d", meaning: "길" },
                { word: "city", display: "c_ty", missing: "i", meaning: "도시" },
                { word: "town", display: "to_n", missing: "w", meaning: "도시" },
                { word: "country", display: "countr_", missing: "y", meaning: "국가, 나라, 지역" },
                { word: "bus", display: "_us", missing: "b", meaning: "버스" },
                { word: "train", display: "trai_", missing: "n", meaning: "기차, 훈련시키다" },
                { word: "plane", display: "pla_e", missing: "n", meaning: "비행기" },
                { word: "bike", display: "_ike", missing: "b", meaning: "자전거" },
                { word: "boat", display: "bo_t", missing: "a", meaning: "배" },
                { word: "ship", display: "sh_p", missing: "i", meaning: "배" },
                { word: "taxi", display: "tax_", missing: "i", meaning: "택시" },
                { word: "truck", display: "_ruck", missing: "t", meaning: "트럭, 화물차" },
                { word: "drive", display: "dri_e", missing: "v", meaning: "운전하다" },
                { word: "fly", display: "_ly", missing: "f", meaning: "날다" },
                { word: "travel", display: "trave_", missing: "l", meaning: "여행" },
                { word: "trip", display: "tr_p", missing: "i", meaning: "여행" },
                { word: "weather", display: "_eather", missing: "w", meaning: "날씨" },
                { word: "rain", display: "rai_", missing: "n", meaning: "비" },
                { word: "snow", display: "sn_w", missing: "o", meaning: "눈" },
                { word: "wind", display: "_ind", missing: "w", meaning: "바람" },
                { word: "cloud", display: "clou_", missing: "d", meaning: "구름" },
                { word: "sky", display: "s_y", missing: "k", meaning: "하늘" },
                { word: "moon", display: "moo_", missing: "n", meaning: "달" },
                { word: "star", display: "_tar", missing: "s", meaning: "별" },
                { word: "earth", display: "eart_", missing: "h", meaning: "지구" }
            ],
            '8단계': [
                { word: "spring", display: "sprin_", missing: "g", meaning: "계절 봄, 용수철" },
                { word: "summer", display: "_ummer", missing: "s", meaning: "계절 여름" },
                { word: "autumn", display: "autu_n", missing: "m", meaning: "가을" },
                { word: "winter", display: "wint_r", missing: "e", meaning: "계절 겨울" },
                { word: "season", display: "_eason", missing: "s", meaning: "계절" },
                { word: "warm", display: "war_", missing: "m", meaning: "따뜻한" },
                { word: "cool", display: "_ool", missing: "c", meaning: "시원한" },
                { word: "wet", display: "w_t", missing: "e", meaning: "젖은" },
                { word: "dry", display: "_ry", missing: "d", meaning: "마른" },
                { word: "hour", display: "hou_", missing: "r", meaning: "시간" },
                { word: "minute", display: "_inute", missing: "m", meaning: "분" },
                { word: "second", display: "sec_nd", missing: "o", meaning: "두 번째의" },
                { word: "early", display: "ear_y", missing: "l", meaning: "일찍" },
                { word: "late", display: "_ate", missing: "l", meaning: "늦은" },
                { word: "now", display: "no_", missing: "w", meaning: "지금" },
                { word: "soon", display: "s_on", missing: "o", meaning: "곧" },
                { word: "before", display: "befor_", missing: "e", meaning: "~전에" },
                { word: "after", display: "_fter", missing: "a", meaning: "~후에" },
                { word: "during", display: "dur_ng", missing: "i", meaning: "~동안" },
                { word: "north", display: "nor_h", missing: "t", meaning: "북쪽" },
                { word: "south", display: "_outh", missing: "s", meaning: "남쪽" },
                { word: "east", display: "ea_t", missing: "s", meaning: "동쪽" },
                { word: "west", display: "wes_", missing: "t", meaning: "서쪽" },
                { word: "left", display: "_eft", missing: "l", meaning: "왼쪽" },
                { word: "right", display: "righ_", missing: "t", meaning: "오른쪽, 옳은" },
                { word: "front", display: "fr_nt", missing: "o", meaning: "앞, 정면" },
                { word: "center", display: "_enter", missing: "c", meaning: "중앙" },
                { word: "middle", display: "midd_e", missing: "l", meaning: "한가운데, 중앙" },
                { word: "top", display: "t_p", missing: "o", meaning: "꼭대기" },
                { word: "bottom", display: "botto_", missing: "m", meaning: "맨 아래" },
                { word: "inside", display: "_nside", missing: "i", meaning: "내부에" },
                { word: "outside", display: "outsid_", missing: "e", meaning: "밖에" },
                { word: "down", display: "dow_", missing: "n", meaning: "아래에" },
                { word: "over", display: "_ver", missing: "o", meaning: "~위쪽에" },
                { word: "under", display: "und_r", missing: "e", meaning: "~아래에" },
                { word: "near", display: "nea_", missing: "r", meaning: "가까운" }
            ],
            '9단계': [
                { word: "far", display: "_ar", missing: "f", meaning: "멀리 떨어진" },
                { word: "there", display: "ther_", missing: "e", meaning: "그곳에" },
                { word: "where", display: "_here", missing: "w", meaning: "어디" },
                { word: "when", display: "whe_", missing: "n", meaning: "언제" },
                { word: "why", display: "w_y", missing: "h", meaning: "왜" },
                { word: "how", display: "ho_", missing: "w", meaning: "어떻게" },
                { word: "what", display: "_hat", missing: "w", meaning: "무엇" },
                { word: "who", display: "wh_", missing: "o", meaning: "누구" },
                { word: "sad", display: "sa_", missing: "d", meaning: "슬픈" },
                { word: "angry", display: "_ngry", missing: "a", meaning: "화난" },
                { word: "glad", display: "gla_", missing: "d", meaning: "기쁜" },
                { word: "sorry", display: "sor_y", missing: "r", meaning: "슬픈, 미안한" },
                { word: "afraid", display: "afrai_", missing: "d", meaning: "두려워하는, 걱정하는" },
                { word: "brave", display: "_rave", missing: "b", meaning: "용감한" },
                { word: "shy", display: "sh_", missing: "y", meaning: "수줍어하는" },
                { word: "kind", display: "k_nd", missing: "i", meaning: "친절한" },
                { word: "friendly", display: "friend_y", missing: "l", meaning: "친근한" },
                { word: "funny", display: "_unny", missing: "f", meaning: "재미있는" },
                { word: "smart", display: "smar_", missing: "t", meaning: "똑똑한" },
                { word: "clever", display: "clev_r", missing: "e", meaning: "영리한, 똑똑한" },
                { word: "stupid", display: "_tupid", missing: "s", meaning: "바보 같은" },
                { word: "lazy", display: "la_y", missing: "z", meaning: "게으른" },
                { word: "busy", display: "bus_", missing: "y", meaning: "바쁜" },
                { word: "tired", display: "_ired", missing: "t", meaning: "피곤한" },
                { word: "sick", display: "sic_", missing: "k", meaning: "아픈" },
                { word: "healthy", display: "healt_y", missing: "h", meaning: "건강한" },
                { word: "strong", display: "_trong", missing: "s", meaning: "강한" },
                { word: "weak", display: "wea_", missing: "k", meaning: "약한" },
                { word: "fast", display: "fas_", missing: "t", meaning: "빠른" },
                { word: "slow", display: "_low", missing: "s", meaning: "느린" },
                { word: "easy", display: "eas_", missing: "y", meaning: "쉬운" },
                { word: "difficult", display: "difficu_t", missing: "l", meaning: "어려운, 힘든" },
                { word: "hard", display: "_ard", missing: "h", meaning: "어려운, 딱딱한" },
                { word: "soft", display: "sof_", missing: "t", meaning: "부드러운" },
                { word: "loud", display: "lou_", missing: "d", meaning: "큰 소리의" },
                { word: "quiet", display: "_uiet", missing: "q", meaning: "조용한" },
                { word: "clean", display: "clea_", missing: "n", meaning: "깨끗한" }
            ],
            '10단계': [
                { word: "dirty", display: "_irty", missing: "d", meaning: "더러운" },
                { word: "empty", display: "emp_y", missing: "t", meaning: "빈" },
                { word: "full", display: "fu_l", missing: "l", meaning: "가득찬" },
                { word: "heavy", display: "_eavy", missing: "h", meaning: "무거운" },
                { word: "light", display: "ligh_", missing: "t", meaning: "빛" },
                { word: "thick", display: "thic_", missing: "k", meaning: "두꺼운" },
                { word: "thin", display: "_hin", missing: "t", meaning: "얇은" },
                { word: "rich", display: "ric_", missing: "h", meaning: "부유한" },
                { word: "poor", display: "_oor", missing: "p", meaning: "가난한" },
                { word: "expensive", display: "expensiv_", missing: "e", meaning: "비싼" },
                { word: "cheap", display: "chea_", missing: "p", meaning: "값싼" },
                { word: "free", display: "_ree", missing: "f", meaning: "자유로운" },
                { word: "buy", display: "bu_", missing: "y", meaning: "사다" },
                { word: "sell", display: "sel_", missing: "l", meaning: "팔다" },
                { word: "pay", display: "_ay", missing: "p", meaning: "지불하다" },
                { word: "cost", display: "cos_", missing: "t", meaning: "값, 비용" },
                { word: "price", display: "_rice", missing: "p", meaning: "가격" },
                { word: "cook", display: "coo_", missing: "k", meaning: "요리하다" },
                { word: "bake", display: "bak_", missing: "e", meaning: "굽다" },
                { word: "wash", display: "_ash", missing: "w", meaning: "씻다" },
                { word: "brush", display: "brus_", missing: "h", meaning: "솔" },
                { word: "sing", display: "sin_", missing: "g", meaning: "노래하다" },
                { word: "dance", display: "_ance", missing: "d", meaning: "춤추다" },
                { word: "music", display: "musi_", missing: "c", meaning: "음악" },
                { word: "song", display: "_ong", missing: "s", meaning: "노래" },
                { word: "guitar", display: "guita_", missing: "r", meaning: "기타" },
                { word: "piano", display: "_iano", missing: "p", meaning: "피아노" },
                { word: "violin", display: "violi_", missing: "n", meaning: "바이올린" },
                { word: "drum", display: "dru_", missing: "m", meaning: "드럼, 북" },
                { word: "game", display: "_ame", missing: "g", meaning: "게임, 놀이" },
                { word: "toy", display: "to_", missing: "y", meaning: "인형" },
                { word: "doll", display: "_oll", missing: "d", meaning: "인형" },
                { word: "sport", display: "spor_", missing: "t", meaning: "운동경기" },
                { word: "football", display: "footbal_", missing: "l", meaning: "축구" },
                { word: "soccer", display: "_occer", missing: "s", meaning: "축구" },
                { word: "basketball", display: "basketba_l", missing: "l", meaning: "농구" },
                { word: "baseball", display: "_aseball", missing: "b", meaning: "야구" },
                { word: "tennis", display: "tenni_", missing: "s", meaning: "테니스" }
            ],
            '11단계': [
                { word: "golf", display: "_olf", missing: "g", meaning: "골프" },
                { word: "swim", display: "swi_", missing: "m", meaning: "수영하다" },
                { word: "ski", display: "_ki", missing: "s", meaning: "스키" },
                { word: "skate", display: "skat_", missing: "e", meaning: "스케이트" },
                { word: "hike", display: "h_ke", missing: "i", meaning: "하이킹, 도보 여행" },
                { word: "camp", display: "_amp", missing: "c", meaning: "캠프, 야영지" },
                { word: "climb", display: "clim_", missing: "b", meaning: "오르다" },
                { word: "jump", display: "_ump", missing: "j", meaning: "뛰어오르다" },
                { word: "exercise", display: "exercis_", missing: "e", meaning: "연습, 운동" },
                { word: "hobby", display: "hobb_", missing: "y", meaning: "취미" },
                { word: "movie", display: "_ovie", missing: "m", meaning: "영화" },
                { word: "film", display: "fil_", missing: "m", meaning: "필름" },
                { word: "television", display: "televisio_", missing: "n", meaning: "텔레비전" },
                { word: "radio", display: "_adio", missing: "r", meaning: "라디오" },
                { word: "computer", display: "compute_", missing: "r", meaning: "컴퓨터" },
                { word: "internet", display: "intern_t", missing: "e", meaning: "인터넷" },
                { word: "website", display: "_ebsite", missing: "w", meaning: "웹사이트" },
                { word: "phone", display: "phon_", missing: "e", meaning: "전화기" },
                { word: "camera", display: "camer_", missing: "a", meaning: "카메라, 사진기" },
                { word: "picture", display: "_icture", missing: "p", meaning: "그림" },
                { word: "photo", display: "phot_", missing: "o", meaning: "사진" },
                { word: "video", display: "vide_", missing: "o", meaning: "비디오" },
                { word: "learn", display: "_earn", missing: "l", meaning: "배우다" },
                { word: "teach", display: "teac_", missing: "h", meaning: "가르치다" },
                { word: "study", display: "stud_", missing: "y", meaning: "공부하다" },
                { word: "lesson", display: "lesso_", missing: "n", meaning: "수업, 교훈" },
                { word: "homework", display: "_omework", missing: "h", meaning: "숙제, 과제" },
                { word: "test", display: "tes_", missing: "t", meaning: "시험" },
                { word: "exam", display: "_xam", missing: "e", meaning: "시험" },
                { word: "quiz", display: "qui_", missing: "z", meaning: "퀴즈" },
                { word: "answer", display: "answe_", missing: "r", meaning: "대답" },
                { word: "question", display: "_uestion", missing: "q", meaning: "질문" },
                { word: "ask", display: "as_", missing: "k", meaning: "묻다" },
                { word: "tell", display: "_ell", missing: "t", meaning: "말하다" },
                { word: "explain", display: "explai_", missing: "n", meaning: "설명하다" },
                { word: "understand", display: "understan_", missing: "d", meaning: "이해하다" },
                { word: "remember", display: "_emember", missing: "r", meaning: "기억하다" },
                { word: "forget", display: "forge_", missing: "t", meaning: "잊다" }
            ],
            '12단계': [
                { word: "doctor", display: "_octor", missing: "d", meaning: "의사" },
                { word: "nurse", display: "nurs_", missing: "e", meaning: "간호사" },
                { word: "teacher", display: "teache_", missing: "r", meaning: "선생님" },
                { word: "student", display: "_tudent", missing: "s", meaning: "학생" },
                { word: "worker", display: "worke_", missing: "r", meaning: "일하는 사람" },
                { word: "farmer", display: "_armer", missing: "f", meaning: "농부" },
                { word: "driver", display: "drive_", missing: "r", meaning: "운전사" },
                { word: "pilot", display: "pilo_", missing: "t", meaning: "조종사" },
                { word: "police", display: "_olice", missing: "p", meaning: "경찰" },
                { word: "soldier", display: "soldie_", missing: "r", meaning: "군인" },
                { word: "artist", display: "artis_", missing: "t", meaning: "예술가" },
                { word: "writer", display: "_riter", missing: "w", meaning: "작가" },
                { word: "singer", display: "singe_", missing: "r", meaning: "가수" },
                { word: "actor", display: "_ctor", missing: "a", meaning: "배우" },
                { word: "waiter", display: "waite_", missing: "r", meaning: "웨이터" },
                { word: "manager", display: "_anager", missing: "m", meaning: "관리자" },
                { word: "boss", display: "bos_", missing: "s", meaning: "상사" },
                { word: "employee", display: "employe_", missing: "e", meaning: "직원" },
                { word: "customer", display: "_ustomer", missing: "c", meaning: "손님, 고객" },
                { word: "job", display: "jo_", missing: "b", meaning: "직업" },
                { word: "business", display: "busines_", missing: "s", meaning: "사업, 장사" },
                { word: "company", display: "_ompany", missing: "c", meaning: "회사, 단체" },
                { word: "meeting", display: "meetin_", missing: "g", meaning: "회의" },
                { word: "team", display: "_eam", missing: "t", meaning: "팀" },
                { word: "group", display: "grou_", missing: "p", meaning: "단체" },
                { word: "member", display: "membe_", missing: "r", meaning: "구성원, 회원" },
                { word: "partner", display: "_artner", missing: "p", meaning: "파트너, 동반자" },
                { word: "marry", display: "marr_", missing: "y", meaning: "결혼하다" },
                { word: "wedding", display: "weddin_", missing: "g", meaning: "결혼" },
                { word: "husband", display: "_usband", missing: "h", meaning: "남편" },
                { word: "wife", display: "wif_", missing: "e", meaning: "아내" },
                { word: "parent", display: "paren_", missing: "t", meaning: "부모" },
                { word: "child", display: "_hild", missing: "c", meaning: "어린이" },
                { word: "son", display: "so_", missing: "n", meaning: "아들" },
                { word: "daughter", display: "daughte_", missing: "r", meaning: "딸" },
                { word: "uncle", display: "_ncle", missing: "u", meaning: "삼촌" },
                { word: "aunt", display: "aun_", missing: "t", meaning: "이모, 고모" }
            ],
            '13단계': [
                { word: "cousin", display: "_ousin", missing: "c", meaning: "사촌" },
                { word: "grandfather", display: "grandfathe_", missing: "r", meaning: "할아버지" },
                { word: "grandmother", display: "_randmother", missing: "g", meaning: "할머니" },
                { word: "neighbor", display: "neighbo_", missing: "r", meaning: "이웃" },
                { word: "guest", display: "_uest", missing: "g", meaning: "손님" },
                { word: "stranger", display: "strange_", missing: "r", meaning: "낯선 사람" },
                { word: "people", display: "peopl_", missing: "e", meaning: "사람" },
                { word: "person", display: "_erson", missing: "p", meaning: "사람" },
                { word: "human", display: "huma_", missing: "n", meaning: "인간, 인간적인" },
                { word: "life", display: "lif_", missing: "e", meaning: "삶, 생명" },
                { word: "death", display: "_eath", missing: "d", meaning: "죽음" },
                { word: "live", display: "liv_", missing: "e", meaning: "살다, 생생한" },
                { word: "die", display: "_ie", missing: "d", meaning: "죽다" },
                { word: "born", display: "bor_", missing: "n", meaning: "태어난" },
                { word: "grow", display: "_row", missing: "g", meaning: "성장하다, 자라다" },
                { word: "change", display: "chang_", missing: "e", meaning: "바꾸다" },
                { word: "move", display: "_ove", missing: "m", meaning: "움직이다" },
                { word: "stay", display: "sta_", missing: "y", meaning: "머물다" },
                { word: "leave", display: "leav_", missing: "e", meaning: "떠나다" },
                { word: "arrive", display: "_rrive", missing: "a", meaning: "도착하다" },
                { word: "return", display: "retur_", missing: "n", meaning: "되돌아가다" },
                { word: "visit", display: "_isit", missing: "v", meaning: "방문하다" },
                { word: "meet", display: "mee_", missing: "t", meaning: "만나다" },
                { word: "join", display: "joi_", missing: "n", meaning: "가입하다, 연결하다" },
                { word: "follow", display: "_ollow", missing: "f", meaning: "따르다" },
                { word: "lead", display: "lea_", missing: "d", meaning: "이끌다" },
                { word: "win", display: "wi_", missing: "n", meaning: "이기다" },
                { word: "lose", display: "_ose", missing: "l", meaning: "잃다" },
                { word: "fight", display: "figh_", missing: "t", meaning: "싸움" },
                { word: "peace", display: "peac_", missing: "e", meaning: "평화" },
                { word: "war", display: "_ar", missing: "w", meaning: "전쟁" },
                { word: "safe", display: "saf_", missing: "e", meaning: "안전한" },
                { word: "danger", display: "_anger", missing: "d", meaning: "위험한" },
                { word: "protect", display: "protec_", missing: "t", meaning: "보호하다" },
                { word: "save", display: "_ave", missing: "s", meaning: "구하다" },
                { word: "care", display: "car_", missing: "e", meaning: "돌봄, 조심" },
                { word: "worry", display: "_orry", missing: "w", meaning: "걱정하다" },
                { word: "hope", display: "hop_", missing: "e", meaning: "희망" },
                { word: "dream", display: "_ream", missing: "d", meaning: "꿈" }
            ],
            '14단계': [
                { word: "believe", display: "_elieve", missing: "b", meaning: "믿다" },
                { word: "trust", display: "trus_", missing: "t", meaning: "신뢰하다" },
                { word: "promise", display: "promis_", missing: "e", meaning: "약속하다" },
                { word: "agree", display: "_gree", missing: "a", meaning: "동의하다, 찬성하다" },
                { word: "disagree", display: "disagre_", missing: "e", meaning: "동의하지 않다" },
                { word: "decide", display: "decid_", missing: "e", meaning: "결정하다" },
                { word: "choose", display: "_hoose", missing: "c", meaning: "선택하다, 고르다" },
                { word: "plan", display: "pla_", missing: "n", meaning: "계획" },
                { word: "prepare", display: "prepar_", missing: "e", meaning: "준비하다" },
                { word: "organize", display: "_rganize", missing: "o", meaning: "조직하다" },
                { word: "control", display: "contro_", missing: "l", meaning: "지배, 통제하다" },
                { word: "manage", display: "_anage", missing: "m", meaning: "관리하다" },
                { word: "nature", display: "natur_", missing: "e", meaning: "자연" },
                { word: "environment", display: "environmen_", missing: "t", meaning: "환경" },
                { word: "animal", display: "_nimal", missing: "a", meaning: "동물" },
                { word: "plant", display: "plan_", missing: "t", meaning: "식물" },
                { word: "tree", display: "_ree", missing: "t", meaning: "나무" },
                { word: "flower", display: "flowe_", missing: "r", meaning: "꽃" },
                { word: "grass", display: "_rass", missing: "g", meaning: "풀, 잔디" },
                { word: "leaf", display: "lea_", missing: "f", meaning: "잎" },
                { word: "forest", display: "fores_", missing: "t", meaning: "숲, 삼림" },
                { word: "mountain", display: "_ountain", missing: "m", meaning: "산" },
                { word: "hill", display: "hil_", missing: "l", meaning: "언덕" },
                { word: "river", display: "_iver", missing: "r", meaning: "강" },
                { word: "lake", display: "lak_", missing: "e", meaning: "호수" },
                { word: "ocean", display: "ocea_", missing: "n", meaning: "바다" },
                { word: "sea", display: "_ea", missing: "s", meaning: "바다" },
                { word: "beach", display: "beac_", missing: "h", meaning: "해변" },
                { word: "island", display: "_sland", missing: "i", meaning: "섬" },
                { word: "desert", display: "deser_", missing: "t", meaning: "사막" },
                { word: "field", display: "_ield", missing: "f", meaning: "들판, 경기장" },
                { word: "farm", display: "far_", missing: "m", meaning: "농장" },
                { word: "science", display: "_cience", missing: "s", meaning: "과학" },
                { word: "technology", display: "technolog_", missing: "y", meaning: "기술" },
                { word: "medicine", display: "medicin_", missing: "e", meaning: "의학" },
                { word: "health", display: "_ealth", missing: "h", meaning: "건강" },
                { word: "energy", display: "energ_", missing: "y", meaning: "에너지, 힘" },
                { word: "power", display: "_ower", missing: "p", meaning: "힘" },
                { word: "electricity", display: "electricit_", missing: "y", meaning: "전기" }
            ],
            '15단계': [
                { word: "fire", display: "_ire", missing: "f", meaning: "불타다" },
                { word: "air", display: "ai_", missing: "r", meaning: "공기" },
                { word: "space", display: "_pace", missing: "s", meaning: "공간, 우주" },
                { word: "planet", display: "plane_", missing: "t", meaning: "행성" },
                { word: "universe", display: "_niverse", missing: "u", meaning: "우주" },
                { word: "world", display: "worl_", missing: "d", meaning: "세상" },
                { word: "global", display: "_lobal", missing: "g", meaning: "전 세계의" },
                { word: "international", display: "internationa_", missing: "l", meaning: "국제적인" },
                { word: "national", display: "_ational", missing: "n", meaning: "국가의" },
                { word: "local", display: "loca_", missing: "l", meaning: "지역의" },
                { word: "public", display: "_ublic", missing: "p", meaning: "공공의" },
                { word: "private", display: "privat_", missing: "e", meaning: "사적인" },
                { word: "personal", display: "_ersonal", missing: "p", meaning: "개인적인" },
                { word: "social", display: "socia_", missing: "l", meaning: "사회적인" },
                { word: "political", display: "_olitical", missing: "p", meaning: "정치적인" },
                { word: "economic", display: "economi_", missing: "c", meaning: "경제적인" },
                { word: "cultural", display: "_ultural", missing: "c", meaning: "문화적인" },
                { word: "traditional", display: "traditiona_", missing: "l", meaning: "전통적인" },
                { word: "modern", display: "_odern", missing: "m", meaning: "현대의" },
                { word: "ancient", display: "ancien_", missing: "t", meaning: "고대의" },
                { word: "historical", display: "_istorical", missing: "h", meaning: "역사적인" },
                { word: "future", display: "futur_", missing: "e", meaning: "미래" },
                { word: "past", display: "_ast", missing: "p", meaning: "과거" },
                { word: "present", display: "presen_", missing: "t", meaning: "현재, 선물" },
                { word: "moment", display: "_oment", missing: "m", meaning: "순간" },
                { word: "period", display: "perio_", missing: "d", meaning: "기간" },
                { word: "century", display: "_entury", missing: "c", meaning: "세기" },
                { word: "decade", display: "decad_", missing: "e", meaning: "10년" },
                { word: "generation", display: "_eneration", missing: "g", meaning: "세대" },
                { word: "age", display: "ag_", missing: "e", meaning: "시대" },
                { word: "era", display: "_ra", missing: "e", meaning: "시대" },
                { word: "history", display: "histor_", missing: "y", meaning: "역사" },
                { word: "story", display: "_tory", missing: "s", meaning: "이야기" },
                { word: "event", display: "even_", missing: "t", meaning: "사건" }
            ],
            '16단계': [
                { word: "experience", display: "_xperience", missing: "e", meaning: "경험" },
                { word: "memory", display: "memor_", missing: "y", meaning: "기억" },
                { word: "knowledge", display: "_nowledge", missing: "k", meaning: "지식" },
                { word: "information", display: "informatio_", missing: "n", meaning: "정보" },
                { word: "idea", display: "_dea", missing: "i", meaning: "생각" },
                { word: "thought", display: "though_", missing: "t", meaning: "생각" },
                { word: "opinion", display: "_pinion", missing: "o", meaning: "의견" },
                { word: "belief", display: "belie_", missing: "f", meaning: "믿음" },
                { word: "attitude", display: "attitud_", missing: "e", meaning: "태도" },
                { word: "behavior", display: "_ehavior", missing: "b", meaning: "행동" },
                { word: "character", display: "characte_", missing: "r", meaning: "성격" },
                { word: "personality", display: "_ersonality", missing: "p", meaning: "개성" },
                { word: "quality", display: "qualit_", missing: "y", meaning: "질" },
                { word: "quantity", display: "_uantity", missing: "q", meaning: "양" },
                { word: "amount", display: "amoun_", missing: "t", meaning: "양" },
                { word: "number", display: "_umber", missing: "n", meaning: "숫자" },
                { word: "size", display: "siz_", missing: "e", meaning: "크기" },
                { word: "weight", display: "_eight", missing: "w", meaning: "무게, 체중" },
                { word: "height", display: "heigh_", missing: "t", meaning: "높이" },
                { word: "length", display: "_ength", missing: "l", meaning: "길이" },
                { word: "width", display: "widt_", missing: "h", meaning: "너비" },
                { word: "depth", display: "_epth", missing: "d", meaning: "깊이" },
                { word: "distance", display: "distanc_", missing: "e", meaning: "거리" },
                { word: "speed", display: "_peed", missing: "s", meaning: "속도" },
                { word: "direction", display: "directio_", missing: "n", meaning: "방향" },
                { word: "position", display: "_osition", missing: "p", meaning: "위치" },
                { word: "location", display: "locatio_", missing: "n", meaning: "위치" },
                { word: "place", display: "_lace", missing: "p", meaning: "장소" },
                { word: "area", display: "are_", missing: "a", meaning: "지역, 구역" },
                { word: "region", display: "_egion", missing: "r", meaning: "지역" },
                { word: "zone", display: "zon_", missing: "e", meaning: "구역" },
                { word: "section", display: "_ection", missing: "s", meaning: "부분" },
                { word: "part", display: "par_", missing: "t", meaning: "일부, 부분" },
                { word: "piece", display: "_iece", missing: "p", meaning: "조각" },
                { word: "element", display: "elemen_", missing: "t", meaning: "요소" },
                { word: "factor", display: "_actor", missing: "f", meaning: "요인" },
                { word: "aspect", display: "aspec_", missing: "t", meaning: "측면" },
                { word: "feature", display: "_eature", missing: "f", meaning: "특징" },
                { word: "characteristic", display: "characteristi_", missing: "c", meaning: "특성" },
                { word: "property", display: "_roperty", missing: "p", meaning: "속성" }
            ],
            '17단계': [
                { word: "function", display: "functio_", missing: "n", meaning: "기능" },
                { word: "purpose", display: "_urpose", missing: "p", meaning: "목적" },
                { word: "goal", display: "goa_", missing: "l", meaning: "골, 득점, 목표" },
                { word: "aim", display: "_im", missing: "a", meaning: "목표" },
                { word: "objective", display: "objectiv_", missing: "e", meaning: "목적" },
                { word: "target", display: "_arget", missing: "t", meaning: "목표" },
                { word: "result", display: "resul_", missing: "t", meaning: "결과" },
                { word: "outcome", display: "_utcome", missing: "o", meaning: "결과" },
                { word: "effect", display: "effec_", missing: "t", meaning: "효과" },
                { word: "impact", display: "_mpact", missing: "i", meaning: "영향" },
                { word: "influence", display: "influenc_", missing: "e", meaning: "영향" },
                { word: "consequence", display: "_onsequence", missing: "c", meaning: "결과" },
                { word: "cause", display: "caus_", missing: "e", meaning: "원인" },
                { word: "reason", display: "_eason", missing: "r", meaning: "이유" },
                { word: "explanation", display: "explanatio_", missing: "n", meaning: "설명" },
                { word: "definition", display: "_efinition", missing: "d", meaning: "정의" },
                { word: "meaning", display: "meanin_", missing: "g", meaning: "의미" },
                { word: "significance", display: "_ignificance", missing: "s", meaning: "중요성" },
                { word: "importance", display: "importanc_", missing: "e", meaning: "중요성" },
                { word: "value", display: "_alue", missing: "v", meaning: "가치" },
                { word: "worth", display: "wort_", missing: "h", meaning: "가치" },
                { word: "benefit", display: "_enefit", missing: "b", meaning: "이익" },
                { word: "advantage", display: "advantag_", missing: "e", meaning: "장점" },
                { word: "disadvantage", display: "_isadvantage", missing: "d", meaning: "단점" },
                { word: "problem", display: "proble_", missing: "m", meaning: "문제" },
                { word: "issue", display: "_ssue", missing: "i", meaning: "주제, 문제" },
                { word: "challenge", display: "challeng_", missing: "e", meaning: "도전" },
                { word: "difficulty", display: "_ifficulty", missing: "d", meaning: "어려움" },
                { word: "solution", display: "solutio_", missing: "n", meaning: "해결책" },
                { word: "answer", display: "_nswer", missing: "a", meaning: "답" },
                { word: "method", display: "metho_", missing: "d", meaning: "방법" },
                { word: "way", display: "_ay", missing: "w", meaning: "길" },
                { word: "approach", display: "approac_", missing: "h", meaning: "접근법" },
                { word: "technique", display: "_echnique", missing: "t", meaning: "기술" },
                { word: "skill", display: "skil_", missing: "l", meaning: "기술" },
                { word: "ability", display: "_bility", missing: "a", meaning: "능력" },
                { word: "talent", display: "talen_", missing: "t", meaning: "재능" },
                { word: "capacity", display: "_apacity", missing: "c", meaning: "능력" },
                { word: "potential", display: "potentia_", missing: "l", meaning: "잠재력" },
                { word: "opportunity", display: "_pportunity", missing: "o", meaning: "기회" }
            ],
            '18단계': [
                { word: "possibility", display: "possibilit_", missing: "y", meaning: "가능성" },
                { word: "probability", display: "_robability", missing: "p", meaning: "확률" },
                { word: "chance", display: "chanc_", missing: "e", meaning: "기회" },
                { word: "risk", display: "_isk", missing: "r", meaning: "위험" },
                { word: "safety", display: "safet_", missing: "y", meaning: "안전" },
                { word: "security", display: "_ecurity", missing: "s", meaning: "보안" },
                { word: "protection", display: "protectio_", missing: "n", meaning: "보호" },
                { word: "defense", display: "_efense", missing: "d", meaning: "방어" },
                { word: "attack", display: "attac_", missing: "k", meaning: "공격" },
                { word: "competition", display: "_ompetition", missing: "c", meaning: "경쟁" },
                { word: "cooperation", display: "cooperatio_", missing: "n", meaning: "협력" },
                { word: "collaboration", display: "_ollaboration", missing: "c", meaning: "협력" },
                { word: "partnership", display: "partnershi_", missing: "p", meaning: "파트너십" },
                { word: "relationship", display: "_elationship", missing: "r", meaning: "관계" },
                { word: "connection", display: "connectio_", missing: "n", meaning: "연결" },
                { word: "communication", display: "_ommunication", missing: "c", meaning: "의사소통" },
                { word: "conversation", display: "conversatio_", missing: "n", meaning: "대화" },
                { word: "discussion", display: "_iscussion", missing: "d", meaning: "의논" },
                { word: "debate", display: "debat_", missing: "e", meaning: "토론" },
                { word: "argument", display: "_rgument", missing: "a", meaning: "논쟁" },
                { word: "conflict", display: "conflic_", missing: "t", meaning: "갈등" },
                { word: "agreement", display: "_greement", missing: "a", meaning: "합의" },
                { word: "contract", display: "contrac_", missing: "t", meaning: "계약" },
                { word: "deal", display: "_eal", missing: "d", meaning: "거래" },
                { word: "transaction", display: "transactio_", missing: "n", meaning: "거래" },
                { word: "exchange", display: "_xchange", missing: "e", meaning: "교환" },
                { word: "trade", display: "trad_", missing: "e", meaning: "무역" },
                { word: "industry", display: "_ndustry", missing: "i", meaning: "산업" },
                { word: "economy", display: "econom_", missing: "y", meaning: "경제" },
                { word: "market", display: "_arket", missing: "m", meaning: "시장" },
                { word: "finance", display: "financ_", missing: "e", meaning: "금융" },
                { word: "investment", display: "_nvestment", missing: "i", meaning: "투자" },
                { word: "profit", display: "profi_", missing: "t", meaning: "이익" },
                { word: "loss", display: "_oss", missing: "l", meaning: "손실" },
                { word: "income", display: "incom_", missing: "e", meaning: "수입" },
                { word: "expense", display: "_xpense", missing: "e", meaning: "비용" },
                { word: "budget", display: "budge_", missing: "t", meaning: "예산" },
                { word: "account", display: "_ccount", missing: "a", meaning: "계정" },
                { word: "balance", display: "balanc_", missing: "e", meaning: "균형" }
            ],
            '19단계': [
                { word: "structure", display: "_tructure", missing: "s", meaning: "구조" },
                { word: "system", display: "syste_", missing: "m", meaning: "시스템" },
                { word: "organization", display: "_rganization", missing: "o", meaning: "조직" },
                { word: "institution", display: "institutio_", missing: "n", meaning: "기관" },
                { word: "establishment", display: "_stablishment", missing: "e", meaning: "설립" },
                { word: "foundation", display: "foundatio_", missing: "n", meaning: "기초" },
                { word: "framework", display: "_ramework", missing: "f", meaning: "틀" },
                { word: "pattern", display: "patter_", missing: "n", meaning: "패턴" },
                { word: "model", display: "_odel", missing: "m", meaning: "모델" },
                { word: "example", display: "exampl_", missing: "e", meaning: "예시, 사례" },
                { word: "sample", display: "_ample", missing: "s", meaning: "샘플" },
                { word: "instance", display: "instanc_", missing: "e", meaning: "사례" },
                { word: "case", display: "_ase", missing: "c", meaning: "경우" },
                { word: "situation", display: "situatio_", missing: "n", meaning: "상황" },
                { word: "condition", display: "_ondition", missing: "c", meaning: "상태" },
                { word: "circumstance", display: "circumstanc_", missing: "e", meaning: "상황" },
                { word: "environment", display: "_nvironment", missing: "e", meaning: "환경" },
                { word: "context", display: "contex_", missing: "t", meaning: "맥락" },
                { word: "background", display: "_ackground", missing: "b", meaning: "배경" },
                { word: "setting", display: "settin_", missing: "g", meaning: "설정" },
                { word: "scene", display: "_cene", missing: "s", meaning: "장면" },
                { word: "view", display: "vie_", missing: "w", meaning: "보기" },
                { word: "perspective", display: "_erspective", missing: "p", meaning: "관점" },
                { word: "angle", display: "angl_", missing: "e", meaning: "각도" },
                { word: "dimension", display: "_imension", missing: "d", meaning: "차원" },
                { word: "scale", display: "scal_", missing: "e", meaning: "규모" },
                { word: "level", display: "_evel", missing: "l", meaning: "수준" },
                { word: "degree", display: "degre_", missing: "e", meaning: "정도" },
                { word: "extent", display: "_xtent", missing: "e", meaning: "정도" },
                { word: "range", display: "rang_", missing: "e", meaning: "범위" },
                { word: "scope", display: "_cope", missing: "s", meaning: "범위" },
                { word: "limit", display: "limi_", missing: "t", meaning: "한계" },
                { word: "boundary", display: "_oundary", missing: "b", meaning: "경계" },
                { word: "border", display: "borde_", missing: "r", meaning: "경계" },
                { word: "edge", display: "_dge", missing: "e", meaning: "가장자리" },
                { word: "surface", display: "surfac_", missing: "e", meaning: "표면" },
                { word: "layer", display: "_ayer", missing: "l", meaning: "층" },
                { word: "basis", display: "basi_", missing: "s", meaning: "기초" }
            ],
            '20단계': [
                { word: "principle", display: "_rinciple", missing: "p", meaning: "원칙" },
                { word: "theory", display: "theor_", missing: "y", meaning: "이론" },
                { word: "concept", display: "_oncept", missing: "c", meaning: "개념" },
                { word: "philosophy", display: "philosoph_", missing: "y", meaning: "철학" },
                { word: "psychology", display: "_sychology", missing: "p", meaning: "심리학" },
                { word: "sociology", display: "sociolog_", missing: "y", meaning: "사회학" },
                { word: "anthropology", display: "_nthropology", missing: "a", meaning: "인류학" },
                { word: "archaeology", display: "archaeolog_", missing: "y", meaning: "고고학" },
                { word: "astronomy", display: "_stronomy", missing: "a", meaning: "천문학" },
                { word: "biology", display: "biolog_", missing: "y", meaning: "생물학" },
                { word: "chemistry", display: "_hemistry", missing: "c", meaning: "화학" },
                { word: "physics", display: "physic_", missing: "s", meaning: "물리학" },
                { word: "mathematics", display: "_athematics", missing: "m", meaning: "수학" },
                { word: "geometry", display: "geometr_", missing: "y", meaning: "기하학" },
                { word: "algebra", display: "_lgebra", missing: "a", meaning: "대수학" },
                { word: "statistics", display: "statistic_", missing: "s", meaning: "통계학" },
                { word: "engineering", display: "_ngineering", missing: "e", meaning: "공학" },
                { word: "architecture", display: "architectur_", missing: "e", meaning: "건축" },
                { word: "surgery", display: "_urgery", missing: "s", meaning: "수술" },
                { word: "therapy", display: "therap_", missing: "y", meaning: "치료" },
                { word: "treatment", display: "_reatment", missing: "t", meaning: "치료" },
                { word: "diagnosis", display: "diagnosi_", missing: "s", meaning: "진단" },
                { word: "analysis", display: "_nalysis", missing: "a", meaning: "분석" },
                { word: "research", display: "researc_", missing: "h", meaning: "연구" },
                { word: "investigation", display: "_nvestigation", missing: "i", meaning: "조사" },
                { word: "experiment", display: "experimen_", missing: "t", meaning: "실험" },
                { word: "observation", display: "_bservation", missing: "o", meaning: "관찰" },
                { word: "discovery", display: "discover_", missing: "y", meaning: "발견" },
                { word: "invention", display: "_nvention", missing: "i", meaning: "발명" },
                { word: "innovation", display: "innovatio_", missing: "n", meaning: "혁신" },
                { word: "development", display: "_evelopment", missing: "d", meaning: "개발" },
                { word: "progress", display: "progres_", missing: "s", meaning: "진보" },
                { word: "advancement", display: "_dvancement", missing: "a", meaning: "발전" },
                { word: "improvement", display: "improvemen_", missing: "t", meaning: "개선" },
                { word: "achievement", display: "_chievement", missing: "a", meaning: "성취" },
                { word: "accomplishment", display: "accomplishmen_", missing: "t", meaning: "성취" },
                { word: "success", display: "_uccess", missing: "s", meaning: "성공" },
                { word: "excellence", display: "excellenc_", missing: "e", meaning: "우수성" }
            ]
            };

        // 현재 사용할 단어 배열(게임에서 사용)
        let wordDatabase = wordSets['1단계'];

        // 현재 단어 상태
        let currentWordData = wordDatabase[0];
        let completedWords = 0;

        // 파티클 시스템
        const particles = [];
        const bloodParticles = [];

        // 배경 별들
        const stars = [];
        for (let i = 0; i < 100; i++) {
            stars.push({
                x: Math.random() * canvas.width,
                y: Math.random() * canvas.height,
                size: Math.random() * 2 + 0.5,
                twinkle: Math.random() * Math.PI * 2,
                speed: Math.random() * 0.02 + 0.01
            });
        }

        // 게임 상태
        let gameState = {
            running: true,
            paused: false,
            startTime: Date.now(),
            timeElapsed: 0
        };

        // 월드 크기 및 카메라 변수 추가
        const worldWidth = 3000;
        const worldHeight = 3000;
        let cameraX = 0;
        let cameraY = 0;

        // 플레이어 객체에 월드 좌표 추가
        const player = {
            worldX: worldWidth / 2,
            worldY: worldHeight / 2,
            width: 24,
            height: 24,
            speed: 3,
            health: 100,
            maxHealth: 100,
            level: 1,
            exp: 0,
            expToNext: 10,
            kills: 0,
            attackSpeed: 1000,
            lastAttack: 0,
            projectileSize: 6,
            angle: 0
        };

        // 입력 상태
        const keys = {
            w: false,
            a: false,
            s: false,
            d: false
        };

        // 게임 오브젝트 배열
        const monsters = [];
        const projectiles = [];
        const floatingLetters = []; // 떠다니는 알파벳들

        // 몬스터 타입 데이터 구조 (외형, 색상, 크기)
        const monsterTypes = [
            { name: 'basic', color: '#ff4444', speed: 1, size: 18, health: 1, shape: 'rect' }, // 기본형: 빨간 사각형
            { name: 'fast', color: '#44ff44', speed: 1.8, size: 14, health: 0.7, shape: 'triangle' }, // 빠른형: 초록 삼각형
            { name: 'tank', color: '#4444ff', speed: 0.7, size: 26, health: 3, shape: 'circle' }, // 탱커형: 파란 원
            { name: 'ranged', color: '#ffaa00', speed: 1, size: 16, health: 1, shape: 'star', shootInterval: 2000 }, // 원거리형: 노란 별
            { name: 'splitter', color: '#ff44aa', speed: 1, size: 18, health: 1, shape: 'rect' }, // 분열형: 분홍 사각형
            { name: 'exploder', color: '#ff8800', speed: 1.2, size: 16, health: 1, shape: 'circle' }, // 폭발형: 주황 원
            { name: 'dodger', color: '#00ffff', speed: 1.1, size: 16, health: 1, shape: 'triangle' }, // 회피형: 하늘 삼각형
        ];

        // 시간 경과에 따라 등장하는 몬스터 타입 결정 함수
        function getAvailableMonsterTypes(timeElapsed) {
            if (timeElapsed < 30) return ['basic', 'fast'];
            if (timeElapsed < 60) return ['basic', 'fast', 'tank', 'splitter'];
            if (timeElapsed < 90) return ['basic', 'fast', 'tank', 'splitter', 'ranged', 'exploder'];
            return ['basic', 'fast', 'tank', 'splitter', 'ranged', 'exploder', 'dodger'];
        }

        // 몬스터 스폰 관련
        let lastMonsterSpawn = 0;
        let monsterSpawnRate = 500; // 0.5초마다 몬스터 스폰 (2배 빠르게)

        // 알파벳 스폰 관련
        let lastLetterSpawn = 0;
        let letterSpawnRate = 124; // 0.124초마다 알파벳 스폰 (속도 반으로)

        // 월드 행성(별) 배열 추가
        const planets = [];
        // 게임 시작 시 행성 여러 개 생성
        function spawnPlanets() {
            // [디버깅] spawnPlanets 함수 호출 여부 확인
            console.log('[디버깅] spawnPlanets 호출됨');
            const planetCount = 10 + Math.floor(Math.random() * 7); // 10~16개
            const minRadius = 800; // 생성 반경 2배로 확대
            const maxRadius = 1200;
            const minGap = 10; // 행성 간 최소 간격
            for (let i = 0; i < planetCount; i++) {
                let tryCount = 0;
                let worldX, worldY, radius;
                let overlapped;
                do {
                    radius = 40 + Math.random() * 60;
                    const angle = Math.random() * Math.PI * 2;
                    worldX = player.worldX + Math.cos(angle) * (minRadius + Math.random() * (maxRadius - minRadius));
                    worldY = player.worldY + Math.sin(angle) * (minRadius + Math.random() * (maxRadius - minRadius));
                    // 월드 경계 체크
                    worldX = Math.max(0, Math.min(worldWidth - radius, worldX));
                    worldY = Math.max(0, Math.min(worldHeight - radius, worldY));
                    // 이미 생성된 행성과 겹치는지 검사
                    overlapped = planets.some(p =>
                        Math.hypot(p.worldX - worldX, p.worldY - worldY) < (p.radius + radius + minGap)
                    );
                    tryCount++;
                } while (overlapped && tryCount < 30);
                const color = {r: 120 + Math.random()*80, g: 120 + Math.random()*80, b: 200, a: 1};
                planets.push({
                    worldX, worldY, radius, color, timer: 0, exploded: false
                });
                // [디버깅] 행성 추가 직후 planets 개수 출력
                console.log('[디버깅] 행성 추가됨, 현재 개수:', planets.length);
            }
        }

        // 알파벳 배열
        const alphabet = 'abcdefghijklmnopqrstuvwxyz'.split('');

        // 키보드 이벤트
        document.addEventListener('keydown', (e) => {
            const key = e.key.toLowerCase();
            if (keys.hasOwnProperty(key)) {
                keys[key] = true;
            }
        });

        document.addEventListener('keyup', (e) => {
            const key = e.key.toLowerCase();
            if (keys.hasOwnProperty(key)) {
                keys[key] = false;
            }
        });

        // 새로운 단어 선택 함수
        function selectNewWord() {
            currentWordData = wordDatabase[Math.floor(Math.random() * wordDatabase.length)];
            // '_' 문자 없이, missing-letter만 남기기
            const display = currentWordData.display.replace('_', '<span class="missing-letter">&nbsp;</span>');
            document.getElementById('wordDisplay').innerHTML = `
                <span class="word-en">${display}</span><span class="word-ko">${currentWordData.meaning}</span>
            `;
        }

        // 단어 완성 결과 표시 함수
        function showWordResult(wordData) {
            // console.log('showWordResult called with:', wordData);
            
            const wordCompleteElement = document.getElementById('wordCompleteText');
            const wordMeaningElement = document.getElementById('wordMeaningText');
            const wordPronunciationElement = document.getElementById('wordPronunciationText');
            const wordResultElement = document.getElementById('wordResult');
            
            // console.log('Found elements:', {
            //     wordComplete: wordCompleteElement,
            //     wordMeaning: wordMeaningElement,
            //     wordPronunciation: wordPronunciationElement,
            //     wordResult: wordResultElement
            // });
            
            if (wordCompleteElement && wordMeaningElement && wordPronunciationElement && wordResultElement) {
                // console.log('All elements found, showing result');
                
                wordCompleteElement.textContent = `✨ ${wordData.word.toUpperCase()} ✨`;
                wordMeaningElement.textContent = `뜻: ${wordData.meaning}`;
                // 발음 텍스트는 더 이상 표시하지 않음
                wordPronunciationElement.textContent = '';
                
                wordResultElement.style.display = 'block';
                
                // 단어 음성 읽기(TTS)
                if ('speechSynthesis' in window) {
                    speechSynthesis.cancel();
                    setTimeout(() => {
                        const utterance = new SpeechSynthesisUtterance(wordData.word);
                        utterance.lang = 'en-US';
                        utterance.rate = 0.8;
                        utterance.volume = 1.0;
                        speechSynthesis.speak(utterance);
                    }, 200);
                }
                
                setTimeout(() => {
                    wordResultElement.style.display = 'none';
                }, 3000);
            } else {
                // console.log('Elements not found, using fallback');
                showFeedback(`${wordData.word} (${wordData.meaning})`, true);
            }
        }

        // 피드백 표시 함수
        function showFeedback(text, isCorrect) {
            const feedback = document.getElementById('feedback');
            feedback.textContent = text;
            feedback.className = isCorrect ? 'correct' : 'incorrect';
            feedback.style.display = 'block';
            
            setTimeout(() => {
                feedback.style.display = 'none';
            }, 1000);
        }

        // 파티클 생성 함수
        function createParticle(x, y, type = 'normal') {
            const particle = {
                x: x,
                y: y,
                vx: (Math.random() - 0.5) * 4,
                vy: (Math.random() - 0.5) * 4,
                life: 1,
                decay: Math.random() * 0.02 + 0.01,
                size: Math.random() * 3 + 1,
                type: type
            };

            if (type === 'blood') {
                particle.color = `hsl(${Math.random() * 30}, 100%, ${Math.random() * 30 + 40}%)`;
                bloodParticles.push(particle);
            } else if (type === 'correct') {
                particle.color = `hsl(120, 100%, ${Math.random() * 30 + 50}%)`;
                particles.push(particle);
            } else {
                particle.color = `hsl(${Math.random() * 60 + 180}, 100%, 70%)`;
                particles.push(particle);
            }
        }

        // 몬스터 생성 함수 (타입별로 생성)
        function createMonster() {
            const availableTypes = getAvailableMonsterTypes(gameState.timeElapsed);
            const typeName = availableTypes[Math.floor(Math.random() * availableTypes.length)];
            const type = monsterTypes.find(t => t.name === typeName);

            // 몬스터 위치 랜덤 생성 (기존 코드 유지)
            const minRadius = 400;
            const maxRadius = 600;
            const angle = Math.random() * Math.PI * 2;
            let x = player.worldX + Math.cos(angle) * (minRadius + Math.random() * (maxRadius - minRadius));
            let y = player.worldY + Math.sin(angle) * (minRadius + Math.random() * (maxRadius - minRadius));
            // 월드 경계 체크
            x = Math.max(0, Math.min(worldWidth - 30, x));
            y = Math.max(0, Math.min(worldHeight - 30, y));

            // 몬스터, 알파벳 등 오브젝트 생성 시 worldX, worldY 사용
            monsters.push({
                worldX: x, // 기존 x → worldX
                worldY: y, // 기존 y → worldY
                width: type.size,
                height: type.size,
                speed: type.speed + Math.random() * 0.3,
                health: type.health,
                color: type.color,
                angle: 0,
                pulse: Math.random() * Math.PI * 2,
                name: type.name,
                shape: type.shape,
                shootInterval: type.shootInterval || null,
                lastShot: 0,
                // 특수 몬스터용 속성
                splitChild: false, // 분열형 자식 여부
                exploded: false,   // 폭발형 자폭 여부
                dodgeCooldown: 0   // 회피형 쿨타임
            });
        }

        // 떠다니는 알파벳 생성 함수
        function createFloatingLetter() {
            // 랜덤 알파벳 선택 (정답 알파벳이 더 자주 나오도록 → 오답 확률 높임)
            let letter;
            if (Math.random() < 0.3) { // 30% 확률로 정답
                letter = currentWordData.missing;
            } else { // 70% 확률로 랜덤 오답 알파벳
                // 정답이 아닌 알파벳만 뽑기
                let wrongs = alphabet.filter(a => a !== currentWordData.missing);
                letter = wrongs[Math.floor(Math.random() * wrongs.length)];
            }

            const isCorrect = letter === currentWordData.missing;

            // 화면 위쪽에서 시작해서 아래로 이동 - 모든 알파벳 동일한 색상
            const minRadius = 400;
            const maxRadius = 600;
            const angle = Math.random() * Math.PI * 2;
            let x = player.worldX + Math.cos(angle) * (minRadius + Math.random() * (maxRadius - minRadius));
            let y = player.worldY + Math.sin(angle) * (minRadius + Math.random() * (maxRadius - minRadius));
            // 월드 경계 체크
            x = Math.max(0, Math.min(worldWidth - 40, x));
            y = Math.max(0, Math.min(worldHeight - 40, y));

            // --- 이동 방향을 플레이어 방향(생성 시점)으로 고정 ---
            const dx = (player.worldX + player.width/2) - x;
            const dy = (player.worldY + player.height/2) - y;
            const dist = Math.sqrt(dx*dx + dy*dy);
            // 기본 속도(거리와 무관하게 일정하게)
            const baseSpeed = 2.0; // 속도 조절 가능
            // 좌우로 살짝 흔들림(기존과 동일)
            const shake = (Math.random() - 0.5) * 2;
            const vx = (dx / dist) * baseSpeed + shake * 0.3;
            const vy = (dy / dist) * baseSpeed;

            floatingLetters.push({
                worldX: x, // 화면 좌표 → 월드 좌표
                worldY: y, // 화면 좌표 → 월드 좌표
                width: 30,
                height: 30,
                vx: vx, // 플레이어 방향 + 좌우 흔들림
                vy: vy, // 플레이어 방향
                letter: letter,
                isCorrect: isCorrect,
                color: '#66aaff', // 모든 알파벳 동일한 파란색
                pulse: Math.random() * Math.PI * 2,
                collected: false
            });
        }

        // 투사체 생성 함수
        function createProjectile() {
            if (monsters.length === 0) return;

            // 가장 가까운 몬스터 찾기
            let nearestMonster = monsters[0];
            let minDistance = Infinity;

            monsters.forEach(monster => {
                const dx = monster.worldX - player.worldX; // worldX 기준
                const dy = monster.worldY - player.worldY; // worldY 기준
                const distance = Math.sqrt(dx * dx + dy * dy);
                if (distance < minDistance) {
                    minDistance = distance;
                    nearestMonster = monster;
                }
            });

            // 투사체 생성
            const dx = nearestMonster.worldX - player.worldX; // worldX 기준
            const dy = nearestMonster.worldY - player.worldY; // worldY 기준
            const distance = Math.sqrt(dx * dx + dy * dy);
            
            projectiles.push({
                worldX: player.worldX + player.width / 2, // worldX 기준
                worldY: player.worldY + player.height / 2, // worldY 기준
                vx: (dx / distance) * 6,
                vy: (dy / distance) * 6,
                size: player.projectileSize,
                color: '#00ff88',
                trail: [],
                life: 1
            });
        }

        // 충돌 감지 함수
        function checkCollision(rect1, rect2) {
            return rect1.worldX < rect2.worldX + rect2.width &&
                   rect1.worldX + rect1.width > rect2.worldX &&
                   rect1.worldY < rect2.worldY + rect2.height &&
                   rect1.worldY + rect1.height > rect2.worldY;
        }

        // 원과 사각형 충돌 감지
        function checkCircleRectCollision(circle, rect) {
            const dx = circle.worldX - Math.max(rect.worldX, Math.min(circle.worldX, rect.worldX + rect.width)); // worldX 기준
            const dy = circle.worldY - Math.max(rect.worldY, Math.min(circle.worldY, rect.worldY + rect.height)); // worldY 기준
            return (dx * dx + dy * dy) < (circle.size * circle.size);
        }

        // 게임 업데이트 함수
        function update() {
            if (!gameState.running || gameState.paused) return;

            const currentTime = Date.now();
            gameState.timeElapsed = Math.floor((currentTime - gameState.startTime) / 1000);

            // 플레이어 이동 및 각도 업데이트
            let moving = false;
            if (keys.w && player.worldY > 0) {
                player.worldY -= player.speed;
                moving = true;
            }
            if (keys.s && player.worldY < worldHeight - player.height) {
                player.worldY += player.speed;
                moving = true;
            }
            if (keys.a && player.worldX > 0) {
                player.worldX -= player.speed;
                moving = true;
            }
            if (keys.d && player.worldX < worldWidth - player.width) {
                player.worldX += player.speed;
                moving = true;
            }

            // 터치/마우스 누르고 있는 동안 이동하는 시스템 로직 수정
            if (isPointerDown && pointerX !== null && pointerY !== null) {
                const dx = pointerX - (player.worldX + player.width/2);
                const dy = pointerY - (player.worldY + player.height/2);
                const dist = Math.sqrt(dx*dx + dy*dy);
                if (dist > 4) {
                    player.worldX += (dx / dist) * player.speed;
                    player.worldY += (dy / dist) * player.speed;
                    moving = true;
                }
            }

            if (moving) {
                player.angle += 0.2;
                if (Math.random() < 0.3) {
                    createParticle(player.worldX + player.width/2, player.worldY + player.height, 'normal');
                }
            }

            // 별 깜빡임 업데이트
            stars.forEach(star => {
                star.twinkle += star.speed;
            });

            // 몬스터 스폰
            if (currentTime - lastMonsterSpawn > monsterSpawnRate) {
                createMonster();
                lastMonsterSpawn = currentTime;
                // 30초마다 스폰 속도 증가, 최소 200ms
                monsterSpawnRate = Math.max(200, 500 - Math.floor(gameState.timeElapsed / 30) * 75);
            }

            // 알파벳 스폰
            if (currentTime - lastLetterSpawn > letterSpawnRate) {
                createFloatingLetter();
                lastLetterSpawn = currentTime;
                // 30초마다 스폰 속도 증가, 최소 120ms
                letterSpawnRate = Math.max(120, 124 - Math.floor(gameState.timeElapsed / 30) * 24);
            }

            // 투사체 발사
            if (currentTime - player.lastAttack > player.attackSpeed) {
                createProjectile();
                player.lastAttack = currentTime;
            }

            // 몬스터 업데이트 (기존과 동일)
            for (let i = monsters.length - 1; i >= 0; i--) {
                const monster = monsters[i];
                const dx = player.worldX - monster.worldX; // worldX 기준
                const dy = player.worldY - monster.worldY; // worldY 기준
                const distance = Math.sqrt(dx * dx + dy * dy);
                
                // 폭발형: 플레이어 근처에서 자폭
                if (monster.name === 'exploder' && !monster.exploded && distance < 40) {
                    // 자폭 파티클 효과
                    for (let j = 0; j < 18; j++) {
                        createParticle(monster.worldX + monster.width/2, monster.worldY + monster.height/2, 'blood');
                    }
                    // 추가: 모든 몬스터 사망 시 파티클(중복 방지 위해 1회만)
                    monsters.splice(i, 1);
                    continue;
                }

                // 분열형: 죽을 때 작은 몬스터 여러 마리 생성
                if (monster.name === 'splitter' && monster.health <= 0 && !monster.splitChild) {
                    for (let k = 0; k < 2 + Math.floor(Math.random() * 2); k++) {
                        monsters.push({
                            worldX: monster.worldX + Math.random() * 20 - 10,
                            worldY: monster.worldY + Math.random() * 20 - 10,
                            width: 12,
                            height: 12,
                            speed: 1.5,
                            health: 0.5,
                            color: '#ff99ee',
                            angle: 0,
                            pulse: Math.random() * Math.PI * 2,
                            name: 'basic',
                            shape: 'rect',
                            splitChild: true,
                            exploded: false,
                            dodgeCooldown: 0
                        });
                    }
                    // 반드시 파티클 생성
                    for (let j = 0; j < 12; j++) {
                        createParticle(monster.worldX + monster.width/2, monster.worldY + monster.height/2, 'blood');
                    }
                    monsters.splice(i, 1);
                    continue;
                }

                // 몬스터 사망 처리 부분에서 파티클 효과를 모든 타입에 공통 적용
                if (monster.health <= 0) {
                    // 파티클 효과 (모든 몬스터 공통)
                    for (let j = 0; j < 12; j++) {
                        createParticle(monster.worldX + monster.width/2, monster.worldY + monster.height/2, 'blood');
                    }
                    monsters.splice(i, 1);
                    // 몬스터 처치 시 경험치 1로 감소
                    player.kills++;
                    player.exp += 1;
                    if (player.exp >= player.expToNext) levelUp();
                    continue;
                }

                // 회피형: 투사체 접근 시 순간 이동(쿨타임 2초)
                if (monster.name === 'dodger') {
                    if (monster.dodgeCooldown > 0) monster.dodgeCooldown--;
                    for (const proj of projectiles) {
                        const pdx = proj.worldX - (monster.worldX + monster.width/2); // worldX 기준
                        const pdy = proj.worldY - (monster.worldY + monster.height/2); // worldY 기준
                        const pdist = Math.sqrt(pdx * pdx + pdy * pdy);
                        if (pdist < 60 && monster.dodgeCooldown === 0) {
                            // 순간 이동(맵 내 랜덤 위치)
                            monster.worldX = Math.random() * (worldWidth - monster.width); // worldX 기준
                            monster.worldY = Math.random() * (worldHeight - monster.height); // worldY 기준
                            monster.dodgeCooldown = 120; // 2초(60fps 기준)
                            break;
                        }
                    }
                }

                // 기존 이동/충돌 코드
                monster.worldX += (dx / distance) * monster.speed; // worldX 기준
                monster.worldY += (dy / distance) * monster.speed; // worldY 기준
                monster.angle += 0.1;
                monster.pulse += 0.15;

                // 플레이어와 몬스터 충돌
                if (checkCollision(player, monster)) {
                    player.health -= 10;
                    hitSound.currentTime = 0;
                    hitSound.play();
                    // 혈흔 파티클 생성
                    for (let j = 0; j < 8; j++) {
                        createParticle(player.worldX + player.width/2, player.worldY + player.height/2, 'blood');
                    }
                    monsters.splice(i, 1);
                    
                    if (player.health <= 0) {
                        deathSound.currentTime = 0;
                        deathSound.play();
                        gameOver();
                    }
                }

                // 분열형: 죽을 때 작은 몬스터 여러 마리 생성
                if (monster.name === 'splitter' && monster.health <= 0 && !monster.splitChild) {
                    for (let k = 0; k < 2 + Math.floor(Math.random() * 2); k++) {
                        monsters.push({
                            worldX: monster.worldX + Math.random() * 20 - 10, // worldX 기준
                            worldY: monster.worldY + Math.random() * 20 - 10, // worldY 기준
                            width: 12,
                            height: 12,
                            speed: 1.5,
                            health: 0.5,
                            color: '#ff99ee',
                            angle: 0,
                            pulse: Math.random() * Math.PI * 2,
                            name: 'basic',
                            shape: 'rect',
                            splitChild: true,
                            exploded: false,
                            dodgeCooldown: 0
                        });
                    }
                    monsters.splice(i, 1);
                    continue;
                }

                // 몬스터 사망 처리 부분에서 파티클 효과를 모든 타입에 공통 적용
                if (monster.health <= 0) {
                    // 파티클 효과 (모든 몬스터 공통)
                    for (let i = 0; i < 12; i++) {
                        createParticle(monster.worldX + monster.width/2, monster.worldY + monster.height/2, 'blood');
                    }
                    monsters.splice(i, 1);
                    // 몬스터 처치 시 경험치 1로 감소
                    player.kills++;
                    player.exp += 1;
                    if (player.exp >= player.expToNext) levelUp();
                }
            }

            // 떠다니는 알파벳 업데이트
            floatingLetters.forEach(letter => {
                if (!letter.collected) {
                    letter.worldX += letter.vx; // worldX 기준
                    letter.worldY += letter.vy; // worldY 기준
                    letter.pulse += 0.1;

                    // 플레이어와 알파벳 충돌
                    if (checkCollision(player, letter)) {
                        letter.collected = true;
                        
                        // 정답 맞출 때 문제 영역에 정답 피드백 표시, 일정 시간 후 다음 문제로 전환
                        if (letter.isCorrect) {
                            completedWords++;
                            showFeedback(`정답!`, true);
                            // 화면 상단 문제 영역에 정답 표시
                            const wordDisplay = document.getElementById('wordDisplay');
                            wordDisplay.innerHTML = `<span class='correct-answer'>정답! ${currentWordData.word.toUpperCase()}</span>`;
                            // 정답 단어 음성 출력
                            if ('speechSynthesis' in window) {
                                speechSynthesis.cancel();
                                setTimeout(() => {
                                    const utterance = new SpeechSynthesisUtterance(currentWordData.word);
                                    utterance.lang = 'en-US';
                                    utterance.rate = 0.8;
                                    utterance.volume = 1.0;
                                    speechSynthesis.speak(utterance);
                                }, 200);
                            }
                            // 성공 파티클
                            for (let i = 0; i < 15; i++) {
                                createParticle(player.worldX + player.width/2, player.worldY + player.height/2, 'correct');
                            }
                            // 경험치 보상 (레벨 × 10)
                            player.exp += player.level * 10;
                            if (player.exp >= player.expToNext) levelUp();
                            // 모든 알파벳 폭발 (데미지 없이 파티클만)
                            floatingLetters.forEach(fl => {
                                for (let j = 0; j < 10; j++) {
                                    const angle = Math.random() * Math.PI * 2;
                                    const dist = 10 + Math.random() * 20;
                                    createParticle(
                                        fl.worldX + fl.width/2 + Math.cos(angle) * dist,
                                        fl.worldY + fl.height/2 + Math.sin(angle) * dist,
                                        'blood'
                                    );
                                }
                                fl.collected = true;
                            });
                            // 2초 후 다음 문제로 전환
                            setTimeout(() => {
                                selectNewWord();
                            }, 2000);
                            return;
                        } else {
                            // 틀린 알파벳
                            player.health -= 15;
                            hitSound.currentTime = 0;
                            hitSound.play();
                            showFeedback(`틀렸습니다! ${letter.letter}`, false);
                            
                            // 데미지 파티클
                            for (let i = 0; i < 8; i++) {
                                createParticle(player.worldX + player.width/2, player.worldY + player.height/2, 'blood');
                            }
                            
                            if (player.health <= 0) {
                                deathSound.currentTime = 0;
                                deathSound.play();
                                gameOver();
                            }
                        }
                    }

                    // 화면 밖으로 나간 알파벳 제거
                    if (letter.worldY > worldHeight + 50) { // worldY 기준
                        letter.collected = true;
                    }
                }
            });

            // 수집된 알파벳 제거
            floatingLetters.splice(0, floatingLetters.length, ...floatingLetters.filter(letter => !letter.collected));

            // 투사체 업데이트
            projectiles.forEach(projectile => {
                // 트레일 추가
                projectile.trail.push({x: projectile.worldX, y: projectile.worldY}); // worldX, worldY 기준
                if (projectile.trail.length > 8) {
                    projectile.trail.shift();
                }

                projectile.worldX += projectile.vx; // worldX 기준
                projectile.worldY += projectile.vy; // worldY 기준
                projectile.life -= 0.01;

                // 투사체와 몬스터 충돌
                monsters.forEach(monster => {
                    if (checkCircleRectCollision(projectile, monster)) {
                        // 몬스터 처치 파티클
                        for (let i = 0; i < 12; i++) {
                            createParticle(monster.worldX + monster.width/2, monster.worldY + monster.height/2, 'blood');
                        }
                        
                        monster.health -= 1; // 몬스터 처치 시 health 감소
                        if (monster.health <= 0) {
                            player.kills++;
                            player.exp += 1;
                            if (player.exp >= player.expToNext) levelUp();
                        }
                        projectiles.splice(projectiles.indexOf(projectile), 1);
                    }
                });

                // 화면 밖으로 나가거나 수명이 다한 투사체 제거
                if (projectile.worldX < -50 || projectile.worldX > worldWidth + 50 || 
                    projectile.worldY < -50 || projectile.worldY > worldHeight + 50 || 
                    projectile.life <= 0) {
                    projectiles.splice(projectiles.indexOf(projectile), 1);
                }
            });

            // 파티클 업데이트
            particles.forEach(particle => {
                particle.x += particle.vx;
                particle.y += particle.vy;
                particle.vx *= 0.98;
                particle.vy *= 0.98;
                particle.life -= particle.decay;
            });
            
            bloodParticles.forEach(particle => {
                particle.x += particle.vx;
                particle.y += particle.vy;
                particle.vx *= 0.95;
                particle.vy *= 0.95;
                particle.vy += 0.1;
                particle.life -= particle.decay;
            });

            // 죽은 파티클 제거
            particles.splice(0, particles.length, ...particles.filter(p => p.life > 0));
            bloodParticles.splice(0, bloodParticles.length, ...bloodParticles.filter(p => p.life > 0));

            // 행성 타이머, 색상 변화, 폭발 처리
            planets.forEach(planet => {
                if (planet.exploded) return;
                // explodeTime이 없으면 새로 할당(안전장치)
                if (typeof planet.explodeTime === 'undefined') {
                    planet.explodeTime = 900 + Math.floor(Math.random() * 900);
                }
                planet.timer += 1; // 프레임 단위(60프레임=1초)
                // 폭발까지 남은 시간에 따라 색상 변화
                const t = Math.min(planet.timer / planet.explodeTime, 1);
                planet.color.r = 120 + t * 120;
                planet.color.g = 120 * (1-t) + 30 * t;
                planet.color.b = 200 * (1-t) + 30 * t;
                // NaN 방지: r, g, b가 NaN이면 기본값으로 대체
                if (isNaN(planet.color.r) || isNaN(planet.color.g) || isNaN(planet.color.b)) {
                    console.log('[디버깅] 행성 색상 NaN 발생:', planet);
                    planet.color.r = 120;
                    planet.color.g = 120;
                    planet.color.b = 200;
                }
                // 폭발
                if (planet.timer >= planet.explodeTime) {
                    planet.exploded = true;
                    // 폭발 파티클 효과
                    for (let i = 0; i < 40; i++) {
                        const angle = Math.random() * Math.PI * 2;
                        const dist = planet.radius + Math.random() * 40;
                        createParticle(
                            planet.worldX + Math.cos(angle) * dist,
                            planet.worldY + Math.sin(angle) * dist,
                            'blood'
                        );
                    }
                    // 폭발 반경 내 플레이어/몬스터 대미지
                    const explosionRadius = planet.radius + 120;
                    // 플레이어
                    const pdx = player.worldX + player.width/2 - planet.worldX;
                    const pdy = player.worldY + player.height/2 - planet.worldY;
                    if (Math.sqrt(pdx*pdx + pdy*pdy) < explosionRadius) {
                        player.health -= 40;
                        hitSound.currentTime = 0;
                        hitSound.play();
                        if (player.health <= 0) {
                            deathSound.currentTime = 0;
                            deathSound.play();
                            gameOver();
                        }
                    }
                    // 몬스터
                    for (let i = monsters.length - 1; i >= 0; i--) {
                        const m = monsters[i];
                        const mdx = m.worldX + m.width/2 - planet.worldX;
                        const mdy = m.worldY + m.height/2 - planet.worldY;
                        if (Math.sqrt(mdx*mdx + mdy*mdy) < explosionRadius) {
                            monsters.splice(i, 1);
                        }
                    }
                    // 폭발 후 새 행성은 일정 시간 후 자동 생성(아래에서 처리)
                }
            });
            // 행성 자동 생성(최대 개수 유지, 일정 간격마다)
            planetSpawnTimer++;
            if (planets.filter(p => !p.exploded).length < maxPlanetCount && planetSpawnTimer >= planetSpawnInterval) {
                spawnPlanet();
                planetSpawnTimer = 0;
                planetSpawnInterval = 120 + Math.floor(Math.random() * 120); // 2~4초 랜덤
            }

            // 카메라 목표 위치 계산
            const targetCameraX = player.worldX - canvas.width / 2;
            const targetCameraY = player.worldY - canvas.height / 2;
            // lerp(보간)으로 부드럽게 이동
            cameraX += (targetCameraX - cameraX) * 0.1;
            cameraY += (targetCameraY - cameraY) * 0.1;
            // 맵 경계에서 카메라가 벗어나지 않도록 보정
            cameraX = Math.max(0, Math.min(cameraX, worldWidth - canvas.width));
            cameraY = Math.max(0, Math.min(cameraY, worldHeight - canvas.height));

            updateUI();

            // 행성과 충돌 시 이동 취소
            let collided = false;
            planets.forEach(planet => {
                if (planet.exploded) return;
                // 원-사각형 충돌(플레이어는 사각형)
                const dx = (player.worldX + player.width/2) - planet.worldX;
                const dy = (player.worldY + player.height/2) - planet.worldY;
                const dist = Math.sqrt(dx*dx + dy*dy);
                if (dist < planet.radius + Math.max(player.width, player.height)/2) {
                    collided = true;
                }
            });
            if (collided) {
                // 이동 취소(이전 위치로 복원)
                // 이전 위치 저장 필요: 이동 전 위치를 prevX, prevY로 저장해서 사용
                player.worldX = prevPlayerX;
                player.worldY = prevPlayerY;
            }

            // 플레이어 이동 처리 직후에 아래 코드 추가
            prevPlayerX = player.worldX;
            prevPlayerY = player.worldY;
        }

        // 렌더링 함수
        function render() {
            // [디버깅] 행성 개수와 exploded 상태 콘솔 출력
            console.log('행성 개수:', planets.length, planets.map(p => p.exploded));
            // 배경 그라디언트
            const gradient = ctx.createRadialGradient(canvas.width/2, canvas.height/2, 0, canvas.width/2, canvas.height/2, canvas.width);
            gradient.addColorStop(0, '#1a1a2e');
            gradient.addColorStop(0.5, '#16213e');
            gradient.addColorStop(1, '#0f1419');
            ctx.fillStyle = gradient;
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            // 별 그리기
            stars.forEach(star => {
                const alpha = (Math.sin(star.twinkle) + 1) / 2;
                ctx.fillStyle = `rgba(255, 255, 255, ${alpha * 0.8})`;
                ctx.beginPath();
                ctx.arc(star.x, star.y, star.size, 0, Math.PI * 2);
                ctx.fill();
            });

            // 혈흔 파티클 그리기
            bloodParticles.forEach(particle => {
                ctx.save();
                ctx.globalAlpha = particle.life;
                ctx.fillStyle = particle.color;
                ctx.beginPath();
                ctx.arc(particle.x - cameraX, particle.y - cameraY, particle.size, 0, Math.PI * 2); // 카메라 오프셋 적용
                ctx.fill();
                ctx.restore();
            });

            // 플레이어 그리기 (발광 효과)
            ctx.save();
            ctx.shadowColor = '#4499ff';
            ctx.shadowBlur = 15;
            ctx.fillStyle = '#4499ff';
            ctx.translate(player.worldX - cameraX, player.worldY - cameraY); // worldX, worldY 기준
            ctx.rotate(player.angle);
            ctx.fillRect(-player.width/2, -player.height/2, player.width, player.height);
            ctx.restore();

            // 플레이어 중심점
            ctx.fillStyle = '#88ccff';
            ctx.beginPath();
            ctx.arc(player.worldX - cameraX, player.worldY - cameraY, 3, 0, Math.PI * 2); // worldX, worldY 기준
            ctx.fill();

            // 몬스터 그리기 (타입별 외형)
            monsters.forEach(monster => {
                const pulse = Math.sin(monster.pulse) * 0.2 + 1;
                ctx.save();
                ctx.shadowColor = monster.color;
                ctx.shadowBlur = 10;
                ctx.fillStyle = monster.color;
                ctx.translate(monster.worldX - cameraX, monster.worldY - cameraY); // worldX, worldY 기준
                ctx.rotate(monster.angle);
                ctx.scale(pulse, pulse);
                // 타입별로 도형 다르게 그리기
                if (monster.shape === 'rect') {
                    // 사각형
                    ctx.fillRect(-monster.width/2, -monster.height/2, monster.width, monster.height);
                } else if (monster.shape === 'circle') {
                    // 원
                    ctx.beginPath();
                    ctx.arc(0, 0, monster.width/2, 0, Math.PI * 2);
                    ctx.fill();
                } else if (monster.shape === 'triangle') {
                    // 삼각형
                    ctx.beginPath();
                    ctx.moveTo(0, -monster.width/2);
                    ctx.lineTo(-monster.width/2, monster.width/2);
                    ctx.lineTo(monster.width/2, monster.width/2);
                    ctx.closePath();
                    ctx.fill();
                } else if (monster.shape === 'star') {
                    // 별
                    drawStar(ctx, 0, 0, monster.width/2, monster.width/4, 5);
                }
                ctx.restore();
            });

            // 떠다니는 알파벳 그리기
            floatingLetters.forEach(letter => {
                if (!letter.collected) {
                    const pulse = Math.sin(letter.pulse) * 0.2 + 1;
                    
                    // 알파벳 배경 (원형)
                    ctx.save();
                    ctx.shadowColor = letter.color;
                    ctx.shadowBlur = 15;
                    ctx.fillStyle = letter.color;
                    ctx.beginPath();
                    ctx.arc(letter.worldX - cameraX, letter.worldY - cameraY, (letter.width/2) * pulse, 0, Math.PI * 2); // worldX, worldY 기준
                    ctx.fill();
                    ctx.restore();

                    // 알파벳 텍스트
                    ctx.save();
                    ctx.fillStyle = 'white';
                    ctx.font = 'bold 20px Arial';
                    ctx.textAlign = 'center';
                    ctx.textBaseline = 'middle';
                    ctx.strokeStyle = 'black';
                    ctx.lineWidth = 3;
                    ctx.strokeText(letter.letter.toUpperCase(), letter.worldX - cameraX, letter.worldY - cameraY); // worldX, worldY 기준
                    ctx.fillText(letter.letter.toUpperCase(), letter.worldX - cameraX, letter.worldY - cameraY); // worldX, worldY 기준
                    ctx.restore();
                }
            });

            // 투사체 트레일 및 투사체 그리기
            projectiles.forEach(projectile => {
                // 트레일 그리기
                if (projectile.trail.length > 1) {
                    ctx.strokeStyle = `rgba(0, 255, 136, ${projectile.life * 0.3})`;
                    ctx.lineWidth = 2;
                    ctx.beginPath();
                    ctx.moveTo(projectile.trail[0].x, projectile.trail[0].y);
                    for (let i = 1; i < projectile.trail.length; i++) {
                        ctx.lineTo(projectile.trail[i].x, projectile.trail[i].y);
                    }
                    ctx.stroke();
                }

                // 투사체 발광 효과
                ctx.save();
                ctx.globalAlpha = projectile.life;
                ctx.shadowColor = projectile.color;
                ctx.shadowBlur = 10;
                ctx.fillStyle = projectile.color;
                ctx.beginPath();
                ctx.arc(projectile.worldX - cameraX, projectile.worldY - cameraY, projectile.size, 0, Math.PI * 2); // worldX, worldY 기준
                ctx.fill();
                ctx.restore();
            });

            // 파티클 그리기
            particles.forEach(particle => {
                ctx.save();
                ctx.globalAlpha = particle.life;
                ctx.fillStyle = particle.color;
                ctx.beginPath();
                ctx.arc(particle.x - cameraX, particle.y - cameraY, particle.size, 0, Math.PI * 2); // 카메라 오프셋 적용
                ctx.fill();
                ctx.restore();
            });

            // 행성 그리기
            planets.forEach(planet => {
                if (planet.exploded) return;
                ctx.save();
                ctx.shadowColor = `rgba(255,0,0,0.5)`;
                ctx.shadowBlur = 30;
                ctx.beginPath();
                ctx.arc(planet.worldX - cameraX, planet.worldY - cameraY, planet.radius, 0, Math.PI * 2);
                ctx.closePath();
                ctx.fillStyle = `rgba(${planet.color.r|0},${planet.color.g|0},${planet.color.b|0},${planet.color.a})`;
                ctx.fill();
                ctx.restore();
            });

            // 체력바 그리기 (개선된 스타일)
            const healthBarWidth = 150;
            const healthBarHeight = 12;
            const healthPercentage = player.health / player.maxHealth;
            
            // HP 라벨
            ctx.fillStyle = 'white';
            ctx.font = 'bold 12px Arial';
            ctx.textAlign = 'left';
            ctx.fillText('HP', 17, canvas.height - 45);
            
            // 체력바 배경
            ctx.fillStyle = 'rgba(0, 0, 0, 0.7)';
            ctx.fillRect(15, canvas.height - 40, healthBarWidth + 4, healthBarHeight + 4);
            
            // 체력바 테두리
            ctx.strokeStyle = '#666';
            ctx.lineWidth = 2;
            ctx.strokeRect(15, canvas.height - 40, healthBarWidth + 4, healthBarHeight + 4);
            
            // 체력바 내부
            const healthGradient = ctx.createLinearGradient(17, 0, 17 + healthBarWidth, 0);
            if (healthPercentage > 0.6) {
                healthGradient.addColorStop(0, '#44ff44');
                healthGradient.addColorStop(1, '#22cc22');
            } else if (healthPercentage > 0.3) {
                healthGradient.addColorStop(0, '#ffaa44');
                healthGradient.addColorStop(1, '#ff8822');
            } else {
                healthGradient.addColorStop(0, '#ff4444');
                healthGradient.addColorStop(1, '#cc2222');
            }
            
            ctx.fillStyle = healthGradient;
            ctx.fillRect(17, canvas.height - 38, healthBarWidth * healthPercentage, healthBarHeight);

            // 경험치바 그리기
            const expBarWidth = 200;
            const expBarHeight = 8;
            const expPercentage = player.exp / player.expToNext;
            
            // XP 라벨
            ctx.fillStyle = 'white';
            ctx.font = 'bold 12px Arial';
            ctx.textAlign = 'right';
            ctx.fillText('XP', canvas.width - expBarWidth - 17, canvas.height - 30);
            
            ctx.fillStyle = 'rgba(0, 0, 0, 0.7)';
            ctx.fillRect(canvas.width - expBarWidth - 15, canvas.height - 25, expBarWidth + 4, expBarHeight + 4);
            
            ctx.strokeStyle = '#666';
            ctx.lineWidth = 1;
            ctx.strokeRect(canvas.width - expBarWidth - 15, canvas.height - 25, expBarWidth + 4, expBarHeight + 4);
            
            const expGradient = ctx.createLinearGradient(canvas.width - expBarWidth - 13, 0, canvas.width - 13, 0);
            expGradient.addColorStop(0, '#4488ff');
            expGradient.addColorStop(1, '#2266cc');
            ctx.fillStyle = expGradient;
            ctx.fillRect(canvas.width - expBarWidth - 13, canvas.height - 23, expBarWidth * expPercentage, expBarHeight);
        }

        // UI 업데이트 함수
        function updateUI() {
            document.getElementById('health').textContent = player.health;
            document.getElementById('level').textContent = player.level;
            document.getElementById('exp').textContent = player.exp;
            document.getElementById('expMax').textContent = player.expToNext;
            document.getElementById('kills').textContent = player.kills;
            document.getElementById('completedWords').textContent = completedWords;
            document.getElementById('time').textContent = gameState.timeElapsed;
        }

        // 레벨업 함수
        function levelUp() {
            player.level++;
            player.exp = 0;
            player.expToNext = Math.floor(player.expToNext * 2); // 기존 1.5배 → 2배
            
            // 레벨업 파티클 효과
            for (let i = 0; i < 20; i++) {
                createParticle(player.worldX + player.width/2, player.worldY + player.height/2, 'correct');
            }
            
            // 레벨업 효과음 재생
            levelupSound.currentTime = 0;
            levelupSound.play();
            
            gameState.paused = true;
            document.getElementById('levelUpModal').style.display = 'block';
        }

        // 업그레이드 선택 함수
        function selectUpgrade(type) {
            switch(type) {
                case 'attackSpeed':
                    player.attackSpeed = Math.max(200, player.attackSpeed * 0.8);
                    break;
                case 'moveSpeed':
                    player.speed += 0.5;
                    break;
                case 'projectileSize':
                    player.projectileSize += 1;
                    break;
                case 'health':
                    player.health = Math.min(player.maxHealth, player.health + 30);
                    break;
            }
            
            document.getElementById('levelUpModal').style.display = 'none';
            gameState.paused = false;
        }

        // 게임 오버 함수
        function gameOver() {
            gameState.running = false;
            
            // 게임 오버 파티클 효과
            for (let i = 0; i < 30; i++) {
                createParticle(player.worldX + player.width/2, player.worldY + player.height/2, 'blood');
            }
            
            document.getElementById('finalTime').textContent = gameState.timeElapsed;
            document.getElementById('finalKills').textContent = player.kills;
            document.getElementById('finalWords').textContent = completedWords;
            document.getElementById('finalLevel').textContent = player.level;
            document.getElementById('gameOver').style.display = 'block';

            // 최고 점수 갱신
            const hs = parseInt(localStorage.getItem('vamSurHighScore') || '0', 10);
            if (player.kills > hs) {
                localStorage.setItem('vamSurHighScore', player.kills);
            }
            loadHighScore();
        }

        // 게재시작 함수
        function restartGame() {
            // 게임 상태 초기화
            gameState.running = true;
            gameState.paused = false;
            gameState.startTime = Date.now();
            gameState.timeElapsed = 0;

            // 플레이어 초기화
            player.worldX = worldWidth / 2;
            player.worldY = worldHeight / 2;
            player.health = 100;
            player.level = 1;
            player.exp = 0;
            player.expToNext = 10;
            player.kills = 0;
            player.speed = 3;
            player.attackSpeed = 1000;
            player.projectileSize = 6;
            player.angle = 0;

            // 게임 데이터 초기화
            completedWords = 0;
            selectNewWord();

            // 배열 초기화
            monsters.length = 0;
            projectiles.length = 0;
            floatingLetters.length = 0;
            particles.length = 0;
            bloodParticles.length = 0;
            planets.length = 0; // 행성 배열도 초기화

            // UI 초기화
            document.getElementById('gameOver').style.display = 'none';
            updateUI();
            // 게임 시작 시 planets 생성
            spawnPlanets();
            // 플레이어, 카메라 초기화
            resetPlayerAndCamera();

            // 메뉴 화면으로 이동
            menuScreen.style.display = 'flex';
            gameStarted = false; // 게임 루프 중복 방지
            // 게임 루프를 강제로 멈추기 위해 아무것도 하지 않음 (requestAnimationFrame 미호출)
            playMenuBGM(); // 메뉴 BGM 재생
        }

        // 게임 루프
        function gameLoop() {
            // 게임이 종료되면 루프 중단 (메뉴화면에서 게임이 멈추도록)
            if (!gameState.running) return;
            update();
            render();
            requestAnimationFrame(gameLoop);
        }

        // 게임 시작
        // 메뉴 화면 요소
        const menuScreen = document.getElementById('menuScreen');
        const startBtn = document.getElementById('startBtn');
        const wordSelect = document.getElementById('wordSelect');
        const highScoreValue = document.getElementById('highScoreValue');

        // 최고 점수 로드
        function loadHighScore() {
            const hs = localStorage.getItem('vamSurHighScore') || 0;
            highScoreValue.textContent = hs;
        }
        loadHighScore();

        // 단어 선택 콤보박스 채우기 (카테고리명)
        wordSelect.innerHTML = '';
        Object.keys(wordSets).forEach(setName => {
            const opt = document.createElement('option');
            opt.value = setName;
            opt.textContent = setName;
            wordSelect.appendChild(opt);
        });

        // 오디오 객체 선언
        const hitSound = new Audio('assets/hit.mp3');
        const deathSound = new Audio('assets/death.mp3');
        const bgmCuriosity = new Audio('assets/bgm_curiosity.mp3');
        const bgmTree = new Audio('assets/bgm_tree and birds.mp3');
        const levelupSound = new Audio('assets/levelup.mp3');
        levelupSound.volume = 0.8;

        // 루프 설정 및 볼륨 조절
        bgmCuriosity.loop = true;
        bgmCuriosity.volume = 0.4;
        bgmTree.loop = true;
        bgmTree.volume = 0.5;
        hitSound.volume = 0.7;
        deathSound.volume = 0.8;

        // 메뉴 진입 시 배경음 재생 함수
        function playMenuBGM() {
            bgmCuriosity.pause();
            bgmCuriosity.currentTime = 0;
            bgmTree.currentTime = 0;
            bgmTree.play();
        }
        // 게임 시작 시 배경음 재생 함수(게임 중 브금 제거)
        function playGameBGM() {
            bgmTree.pause();
            bgmTree.currentTime = 0;
            // bgmCuriosity.pause();
            // bgmCuriosity.currentTime = 0;
            // bgmCuriosity.play(); // 게임 중 브금 재생하지 않음
        }

        // 시작 버튼 클릭 시 메뉴 숨기고 게임 시작
        startBtn.onclick = () => {
            menuScreen.style.display = 'none';
            playGameBGM();
            // [수정] 최초 게임 시작 시에도 행성 배열 초기화 및 생성
            planets.length = 0;
            spawnPlanets();
            // 플레이어, 카메라 초기화
            resetPlayerAndCamera();
            // 선택한 단어 모음(카테고리)로 wordDatabase 교체
            const selectedSet = wordSelect.value;
            if (selectedSet && wordSets[selectedSet]) {
                wordDatabase = wordSets[selectedSet];
            }
            // 첫 단어 선택
            currentWordData = wordDatabase[0];
            selectNewWord();
            if (!gameStarted) {
                gameStarted = true;
                gameLoop(); // 메뉴에서만 게임 루프 시작
            }
            // 게임 상태 초기화 등 필요시 추가
        };

        // 게재시작 함수
        // selectNewWord(); // 게임 시작 시 첫 단어 설정은 메뉴에서 시작 버튼 클릭 시 처리
        // gameLoop(); // 게임 루프는 메뉴에서 시작 버튼 클릭 시 실행

        // 별 그리기 함수 (원거리형 몬스터용)
        function drawStar(ctx, x, y, outerRadius, innerRadius, points) {
            ctx.save();
            ctx.beginPath();
            for (let i = 0; i < points * 2; i++) {
                const angle = (Math.PI / points) * i;
                const r = i % 2 === 0 ? outerRadius : innerRadius;
                ctx.lineTo(
                    x + Math.cos(angle) * r,
                    y + Math.sin(angle) * r
                );
            }
            ctx.closePath();
            ctx.fill();
            ctx.restore();
        }

        // 터치/마우스 클릭한 위치로 이동하는 시스템 추가
        // 플레이어, 카메라 초기화 함수 추가
        function resetPlayerAndCamera() {
            player.worldX = worldWidth / 2;
            player.worldY = worldHeight / 2;
            cameraX = player.worldX - canvas.width / 2;
            cameraY = player.worldY - canvas.height / 2;
            // 카메라 경계 보정
            cameraX = Math.max(0, Math.min(cameraX, worldWidth - canvas.width));
            cameraY = Math.max(0, Math.min(cameraY, worldHeight - canvas.height));
        }

        // 터치 이벤트 (모바일)
        canvas.addEventListener('touchstart', function(e) {
            isPointerDown = true;
            const rect = canvas.getBoundingClientRect();
            const touch = e.touches[0];
            pointerX = touch.clientX - rect.left + cameraX;
            pointerY = touch.clientY - rect.top + cameraY;
        });
        canvas.addEventListener('touchmove', function(e) {
            if (isPointerDown) {
                const rect = canvas.getBoundingClientRect();
                const touch = e.touches[0];
                pointerX = touch.clientX - rect.left + cameraX;
                pointerY = touch.clientY - rect.top + cameraY;
            }
        });
        window.addEventListener('touchend', function() {
            isPointerDown = false;
            pointerX = pointerY = null;
        });
        // 마우스 클릭 이벤트 (PC)
        canvas.addEventListener('mousedown', function(e) {
            isPointerDown = true;
            const rect = canvas.getBoundingClientRect();
            pointerX = e.clientX - rect.left + cameraX;
            pointerY = e.clientY - rect.top + cameraY;
        });
        canvas.addEventListener('mousemove', function(e) {
            if (isPointerDown) {
                const rect = canvas.getBoundingClientRect();
                pointerX = e.clientX - rect.left + cameraX;
                pointerY = e.clientY - rect.top + cameraY;
            }
        });
        window.addEventListener('mouseup', function() {
            isPointerDown = false;
            pointerX = pointerY = null;
        });

        // canvas 크기 반응형 조정
        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
        }
        window.addEventListener('resize', resizeCanvas);
        resizeCanvas(); // 게임 시작 시에도 호출

        let gameStarted = false; // 게임 시작 여부 플래그(전역)
        let prevPlayerX = player.worldX, prevPlayerY = player.worldY; // 이동 처리 직전 선언

        // 행성 1개 생성 함수 (겹치지 않게, 폭발 시간 랜덤)
        function spawnPlanet() {
            const minRadius = 800;
            const maxRadius = 1200;
            const minGap = 10;
            let tryCount = 0;
            let worldX, worldY, radius;
            let overlapped;
            do {
                radius = 40 + Math.random() * 60;
                const angle = Math.random() * Math.PI * 2;
                worldX = player.worldX + Math.cos(angle) * (minRadius + Math.random() * (maxRadius - minRadius));
                worldY = player.worldY + Math.sin(angle) * (minRadius + Math.random() * (maxRadius - minRadius));
                worldX = Math.max(0, Math.min(worldWidth - radius, worldX));
                worldY = Math.max(0, Math.min(worldHeight - radius, worldY));
                overlapped = planets.some(p =>
                    Math.hypot(p.worldX - worldX, p.worldY - worldY) < (p.radius + radius + minGap)
                );
                tryCount++;
            } while (overlapped && tryCount < 30);
            const color = {r: 120 + Math.random()*80, g: 120 + Math.random()*80, b: 200, a: 1};
            // 폭발 시간: 15~30초(900~1800프레임) 랜덤
            const explodeTime = 900 + Math.floor(Math.random() * 900);
            planets.push({
                worldX, worldY, radius, color, timer: 0, exploded: false, explodeTime
            });
        }

        // 최대 행성 개수(10~16개 랜덤)
        let maxPlanetCount = 12;
        // 행성 자동 생성 타이머 변수
        let planetSpawnTimer = 0;
        let planetSpawnInterval = 120; // 2초(60fps 기준)

        // 게임 시작 시 일부만 먼저 생성
        function initPlanets() {
            maxPlanetCount = 10 + Math.floor(Math.random() * 7); // 10~16개
            planets.length = 0;
            for (let i = 0; i < 4; i++) { // 4개만 먼저 생성
                spawnPlanet();
            }
            // 다음 생성까지 랜덤 대기(2~4초)
            planetSpawnTimer = 0;
            planetSpawnInterval = 120 + Math.floor(Math.random() * 120);
        }
    </script>
</body>
</html>